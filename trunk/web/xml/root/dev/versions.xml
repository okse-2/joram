<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>

<!DOCTYPE document SYSTEM '../../../common/dtd/objectweb.dtd'>

<document>
  <properties>
    <author email="joram-team@objectweb.org">JORAM team</author>
    <title>Releases Info</title>
    <filename>versions.xml</filename>
    <pathtoroot>..</pathtoroot>
  </properties>

  <body>
    <s1 name="joram CVS Version, no tag">
      <p>Getting Joram through CVS without specifying a tag allows to get
      the latest tagged version with the latest corrections and updates.</p>
      <s2 name="Modifications">
      <p>February 13: THE CVS TREE IS CURRENTLY UNDER HEAVY MODIFICATIONS; THE
      CODE BASE WILL BE UNSTABLE UNTIL SUBMISSION IS OVER.</p>
      </s2>
    </s1>
    <s1 name="joram3_7_1 (February 3, 2004)">
      <p>This version has been tagged for integration within JOnAS 3.3.6.</p>
      <s2 name="Modifications">
      <ul>
        <li><code>ObjectMessage</code> optimization [2]. When a 
        <code>getObject()</code> call fails, an other trial is performed
        using the context class loader. This again, for improving JORAM's
        behaviour within an application server. Impacted class is
        <code>fr.dyade.aaa.joram.ObjectMessage</code>.</li>
        <li><code>ObjectMessage</code> optimization [1]. The wrapped object in
        an <code>ObjectMessage</code> instance is not automatically 
        deserialized when reaching the consumer's connection, but only when
        calling the <code>getObject</code> method. This for improving the
        behaviour of JORAM within application servers.
        The updated classes are <code>fr.dyade.aaa.mom.messages.Message</code>
        and <code>fr.dyade.aaa.joram.ObjectMessage</code>.</li>
        <li>New flow control mechanism. In order not to overload a JORAM server
        with incoming messages, it is possible to set a maximum authorized
        flow (in messages / second). This setting is done in the configuration
        file, at the <code>ConnectionFactory</code> service level. For
        example, for limitating the flow to 50 messages per second:
        <code>&lt;service class="fr.dyade.aaa.mom.proxies.tcp.ConnectionFactory"
        args="16010 root root 50"/&gt;</code>. The updated classes are
        <code>fr.dyade.aaa.mom.proxies.tcp.ConnectionFactory</code> and
        <code>fr.dyade.aaa.mom.proxies.ProxyImpl</code>.</li>
      </ul>
      </s2>
      <s2 name="Corrected bugs">
      <ul>
        <li>Expired message monitored as pending messages.
        When monitoring a queue's messages, the expired messages are now
        removed (and sent to the DMQ, if needed), and thus not listed as
        pending messages anymore. The updated
        class is <code>fr.dyade.aaa.mom.dest.QueueImpl</code>.</li>
        <li>Expired "receive" requests monitored as pending requests, as 
        described
        <a href="http://www.objectweb.org/wws/arc/joram/2003-12/msg00064.html">
        here</a>. When monitoring a queue's requests, the expired requests are
        removed and thus not listed as pending requests anymore. The updated
        class is <code>fr.dyade.aaa.mom.dest.QueueImpl</code>.</li>
        <li>Automatic deny request sent to already deleted temporary queue, 
        found by
        <a href="http://www.objectweb.org/wws/arc/joram/2003-12/msg00042.html">
        Gerald Schröder</a>. This bug had no influence on a server's
        operations, however it generated the logging of ERROR messages. It
        is corrected, the class to update is
        <code>fr.dyade.aaa.mom.proxies.ClientContext</code>.</li>
        <li><code>NullPointerException</code> thrown by a single user's proxy
        which subscribed to various leafs of a same topic hierarchy, found by
        <a href="http://www.objectweb.org/wws/arc/joram/2003-12/msg00019.html">
        Mark Anderson</a>. This bug is due to messages not being cloned in the
        topic leafs and to an improper processing of duplicated incoming
        messages. It has been corrected, the impacted classes
        are  <code>fr.dyade.aaa.mom.dest.TopicImpl</code> and
        <code>fr.dyade.aaa.mom.proxies.ClientSubscription</code>.
        </li>
        <li>Improper message delivery in a topic hierarchy when set on a
        single server, and when consumers subscribe to various leafs of the
        tree. Messages were not appropriately cloned and this resulted in
        subscribers never getting any message. The bug is corrected and the
        impacted class is <code>fr.dyade.aaa.mom.dest.TopicImpl</code>.
        </li>
        <li>Messages delivered in an incorrect order after a rollback or
        disconnection, found by
        <a href="http://www.objectweb.org/wws/arc/joram/2003-11/msg00080.html">
        Franck Delporte</a>. In some cases messages were delivered in an order
        different from the original delivery order after a client rollback or
        disconnection. The bug is corrected, the updated classes are
        <code>fr.dyade.aaa.mom.dest.QueueImpl</code>,
        <code>fr.dyade.aaa.mom.messages.Message</code>,
        <code>fr.dyade.aaa.mom.proxies.ClientSubscription</code>,
        <code>fr.dyade.aaa.mom.proxies.ProxyImpl</code>.
        </li>
        <li>Message delivered twice, found by
        <a href="http://www.objectweb.org/wws/arc/joram/2003-11/msg00065.html">
        Dirk Muthorst</a>. In a very specific case, persistent messages might
        be duplicated by the server. It occured when a message which arrived
        for example on a queue, was persisted alone, then consumed and denied
        but with other messages. Then it would be persisted again with the
        group of denied messages, its original individual persistence file
        being kept. Thus, the message would finaly be consumed twice after
        a server recovery (tricky!). The bug is corrected and the
        updated class is
        <code>fr.dyade.aaa.mom.messages.PersistenceModule</code>.
        </li>
      </ul>
      </s2>
    </s1>
    <s1 name="joram3_7_0 (November 3, 2003)">
      <p>This release introduces a graphical administration and monitoring
      tool.</p>
      <s2 name="Modifications">
      <ul>
        <li>Creation of a new sources branch: <code>org.objectweb.joram</code>,
        destinated to contain the JORAM client and MOM sources.</li>
        <li>Submission of a new graphical administration tool engineered by
        Alexander Fedorowicz, in
        <code>org.objectweb.joram.client.tools.admin</code>.</li>
      </ul>
      </s2>
      <s2 name="Corrected bugs">
      <ul>
        <li>Recovery issue, found by 
        <a href="http://www.objectweb.org/wws/arc/joram/2003-10/msg00069.html">
        Dirk Muthorst</a>. When stopping a JORAM server during a PTP exchange,
        and re-starting it, a <code>NullPointerException</code> was happening
        from time to time. This was due to the fact that the consumer's 
        proxy would deny twice a same message (the message currently exchanged
        when the server stops), and that the queue could not handle this double
        deny. This bug is corrected, the corrected class is
        <code>fr.dyade.aaa.mom.dest.QueueImpl</code>.</li>
        <li><code>NullPointerException</code> occuring when requesting the
        defaut DMQ settings of a server in a distributed configuration; 
        corrected class is <code>fr.dyade.aaa.mom.dest.AdminTopicImpl</code>. 
        </li>
      </ul>
      </s2>
    </s1>
    <s1 name="joram3_6_3 (October 14, 2003)">
      <p>This release is integrated into JOnAS 3.3.1.</p>
      <s2 name="Modifications">
      <ul>
        <li>New possibility to create JORAM destinations with a name, so that
        such destinations may be permanently retrieved independently of JNDI.
        The modified classes are
        <code>fr.dyade.aaa.joram.admin.AdminItf</code>,
        <code>fr.dyade.aaa.joram.admin.AdminImpl</code>,
        <code>fr.dyade.aaa.mom.admin.CreateDestinationRequest</code> and
        <code>fr.dyade.aaa.mom.dest.AdminTopicImpl</code>.</li>
        <li>New <code>build.xml</code> file for simplier building and
        cleaning targets.</li>
        <ul>
          <li>Shipping JORAM: <em>ant ship.joram</em></li>
          <li>Shipping kJORAM: <em>ant ship.kjoram</em></li>
          <li>Cleaning the distribution: <em>ant clean</em></li>
        </ul>
      </ul>
      </s2>
      <s2 name="Corrected bugs">
      <ul>
        <li>Impossible to bind <code>TopicSoapConnectionFactory</code> objects
        when using JORAM JNDI through the SOAP protocol, found by
        <a href="http://www.objectweb.org/wws/arc/joram/2003-10/msg00003.html">
        Sabrina Tardelli</a>. The bug is corrected, the impacted classes are
        <code>fr.dyade.aaa.joram.soap.TopicSoapConnectionFactory</code> and
        <code>fr.dyade.aaa.joram.soap.QueueSoapConnectionFactory</code>.</li>
      </ul>
      </s2>
    </s1>
    <s1 name="joram3_6_2 (September 22, 2003)">
      <p>This release is integrated into JOnAS 3.3.</p>
      <s2 name="Modifications">
      <ul>
        <li>Modification of <code>AgentServer</code> and
        <code>NameService</code> initialization allowing to stop a server
        (<code>AgentServer.stop()</code>), intialize it
        (<code>AgentServer.init(...)</code>) and start it again. In
        <code>NullTransaction</code> mode should allow to re-initialize 
        completely the server. Impacted packages are
        <code>fr.dyade.aaa.agent</code>, <code>fr.dyade.aaa.ns</code> and
        <code>fr.dyade.aaa.util</code>.</li>
      </ul>
      </s2>
      <s2 name="Corrected bugs">
      <ul>
        <li>Invalid creation of a <code>s$i</code> persistence root when
        running JORAM in transient mode; impacted classes are
        <code>fr.dyade.aaa.agent.AgentServer</code>,
        <code>fr.dyade.aaa.util.ATransaction</code> and
        <code>fr.dyade.aaa.util.NullTransaction</code>.</li>
      </ul>
      </s2>
    </s1>
    <s1 name="joram3_6_1 (September 11, 2003)">
      <p>This release introduces MBean classes for standard JMX management.</p>
      <s2 name="Modifications"> 
      <ul>
        <li>JMX MBeans introduced for the management of the JORAM destinations
        and users. The "MBeanified" destinations are still hosted by the
        <code>fr.dyade.aaa.mom.dest</code> package (more packages have been
        impacted by the support of JMX). This new feature is not documented
        yet.</li>
      </ul>
      </s2>
      <s2 name="Corrected bugs">
      <ul>
        <li>Destinations were not removed from internal lists when being
        deleted. Bug corrected in
        <code>fr.dyade.aaa.mom.dest.AdminTopicImpl</code>.</li>
        <li>Bug related to the <code>MessageConsumer</code>
        <code>noLocal</code> attribute, found by 
        <a href="http://www.objectweb.org/wws/arc/joram/2003-09/msg00020.html">
        Tony Thompson</a>. The bug has been corrected, the impacted class is
        <code>fr.dyade.aaa.mom.proxies.ClientSubscription</code>.</li>
        <li>Invalid precedence on naming properties (as noticed
        <a href="http://www.objectweb.org/wws/arc/joram/2003-09/msg00015.html">
        here</a>). The correct order is now taken into account. Modifications
        occured in the <code>fr.dyade.aaa.jndi2</code> package.</li>
        <li>Blocking <code>AdminItf.stopServer</code> method (as noticed
        <a href="http://www.objectweb.org/wws/arc/joram/2003-08/msg00021.html">
        here</a>). The processing of this method disapeared from the
        administration topic server side since release 3.5, probably due to an
        invalid CVS merge. The code is back
        now in class <code>fr.dyade.aaa.mom.dest.AdminTopicImpl</code>.</li>
      </ul>
      </s2>
    </s1>
    <s1 name="joram3_6_0 (August 7, 2003)"> 
      <p>This version provides the kJORAM libraries allowing J2ME applications
      to connect to the JORAM platform.</p>
      <s2 name="Modifications">
      <ul>
        <li>Major modifications occured to the CVS tree. kJORAM sources are
        located in the <code>src/com/scalagent</code> directory. JORAM samples
        have been moved to the <code>samples/src/joram</code> directory, and
        the configuration files directory is now <code>samples/config</code>.
        The kJORAM samples are located in the <code>samples/src/kjoram</code>
        directory.</li>
        <li>Improvement of the closing of a dead connection; particularly, calling
        <code>Connection.close()</code> within the <code>onException</code> method of
        an <code>ExceptionListener</code> would generate an infinite closing loop.
        The impacted class is <code>fr.dyade.aaa.joram.Driver</code>.
      </li>
      <li><code>setConfig(...)</code> method in
        <code>fr.dyade.aaa.agent.AgentServer</code> has now a public access 
        for configuration purposes; calling it after the server has been
        started throws an exception.</li>
      </ul>
      </s2>
      <s2 name="Corrected Bugs">
      <ul>
      <li><code>ClassCastException</code> occuring in
        <code>fr.dyade.aaa.mom.proxies.ProxyImpl</code> when subscribing to
        a non-readable topic, found by
        <a href="http://www.objectweb.org/wws/arc/joram/2003-06/msg00053.html">
        Prashanth Kasturi</a>. The bug is corrected, the impacted class is
        <code>fr.dyade.aaa.mom.proxies.ProxyImpl</code>.</li>
      </ul>
      </s2>
    </s1>
    <s1 name="joram3_5_0 (June 2003, 24th)"> 
      <p>This version provides a totally refactored message persistence
      management.</p>  
      <s2 name="Modifications">
      <p>Modifications mainly occured in the destinations' and proxy's 
      algorithms. Check packages <code>fr.dyade.aaa.mom.dest</code> and
      <code>fr.dyade.aaa.mom.proxies</code>. Check also the new class
      <code>fr.dyade.aaa.mom.messages.PersistenceModule</code>.</p>
      </s2>
    </s1>

  </body>

</document>

<?xml version="1.0"?>
<!DOCTYPE project [
    <!ENTITY common SYSTEM "common.xml">
    <!ENTITY buila3 SYSTEM "buila3.xml">
    ]>
    

<project default="tests.all" basedir=".">
    
  <property file="env.properties"/>


<target name="tests.all" description=" --> lauch all tests">
    <ant dir="." antfile="build.xml" target="tests.messages"/>
    <ant dir="." antfile="build.xml" target="tests.property"/>
    <ant dir="." antfile="build.xml" target="tests.selector"/>
    <ant dir="." antfile="build.xml" target="tests.temporary"/>
    <ant dir="." antfile="build.xml" target="base.test_Brows_Q"/>
    <ant dir="." antfile="build.xml" target="tests.ack"/>
    <ant dir="." antfile="build.xml" target="base.test_MsgList_T"/>
    <ant dir="." antfile="build.xml" target="base.test_Exp_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_Multi_Q"/>
    <ant dir="." antfile="build.xml" target="tests.transacted"/>
    <ant dir="." antfile="build.xml" target="tests.exceptionlistener"/>
    <ant dir="." antfile="build.xml" target="tests.ha"/>
    <ant dir="." antfile="build.xml" target="tests.recovery"/>
    <ant dir="." antfile="build.xml" target="tests.dist"/>
    <ant dir="." antfile="build.xml" target="admin.test"/>
    <ant dir="." antfile="build.xml" target="tests.client"/>
    <ant dir="." antfile="build.xml" target="tests.local"/>
    <ant dir="." antfile="build.xml" target="tests.dursub"/>
    <ant dir="." antfile="build.xml" target="tests.tcp"/>
    <ant dir="." antfile="build.xml" target="tests.reconf"/>
    <ant dir="." antfile="build.xml" target="tests.perf"/>
    <ant dir="." antfile="build.xml" target="tests.noreg"/>
    <ant dir="." antfile="build.xml" target="tests.xa"/>
    <ant dir="." antfile="build.xml" target="tests.jndi"/>
    <ant dir="." antfile="build.xml" target="tests.nocoupling"/>
    <ant dir="." antfile="build.xml" target="tests.bridge"/>
    <ant dir="." antfile="build.xml" target="tests.schedqueue"/>
    <ant dir="." antfile="build.xml" target="tests.cluster"/>
    <ant dir="." antfile="build.xml" target="tests.hierarchical"/>
    <ant dir="." antfile="build.xml" target="tests.ssl"/>
    <ant dir="." antfile="build.xml" target="jca.test"/>
</target>

<target name="tests.messages" description=" --> lauch all messages tests">
    <ant dir="." antfile="build.xml" target="base.test_Q_M"/>
    <ant dir="." antfile="build.xml" target="base.test_T_M"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MText"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MText"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MObj"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MObj"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MByte"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MByte"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MMap"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MMap"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MStream"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MStream"/>
    <ant dir="." antfile="build.xml" target="base.test_dmqb"/>
</target>
<target name="tests.property" description=" --> lauch all properties tests" >
    <ant dir="." antfile="build.xml" target="base.test_property_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_property_T"/>
</target>
<target name="tests.selector" description=" --> lauch all selectors tests">
    <ant dir="." antfile="build.xml" target="base.test_Selector_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_Selector_T"/>
</target>
<target name="tests.temporary" description=" --> lauch all temporary tests">
    <ant dir="." antfile="build.xml" target="base.test_Temp_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_Temp_T"/>
    <ant dir="." antfile="build.xml" target="base.test_Temp_T2"/>
</target>
<target name="tests.ack" description=" --> lauch all acknowledge tests">
    <ant dir="." antfile="build.xml" target="base.test_CAck1_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_CAck1_T"/>
    <ant dir="." antfile="build.xml" target="base.test_CAck2_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_CAck2_T"/>
    <ant dir="." antfile="build.xml" target="base.test_CAck3_Q"/>
</target>

<target name="tests.transacted" description=" --> lauch all transacted tests">
    <ant dir="." antfile="build.xml" target="base.test_Trans_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_Trans_T"/>
</target>
<target name="tests.exceptionlistener" description=" --> lauch all exceptionlistener tests">
    <ant dir="." antfile="build.xml" target="base.test_ExcpList_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_ExcpList_T"/>
</target>

<target name="tests.ha" description=" --> lauch all ha tests">
    <ant dir="." antfile="build.xml" target="ha.test1"/>
    <ant dir="." antfile="build.xml" target="ha.test2"/>
</target>
<target name="tests.recovery" description=" --> lauch all recovery tests">
    <ant dir="." antfile="build.xml" target="recovery.test1"/>
    <ant dir="." antfile="build.xml" target="recovery.test2"/>
    <ant dir="." antfile="build.xml" target="recovery.test3"/>
    <ant dir="." antfile="build.xml" target="recovery.test4"/>
    <ant dir="." antfile="build.xml" target="recovery.test5"/>
    <ant dir="." antfile="build.xml" target="recovery.test6"/>
    <ant dir="." antfile="build.xml" target="recovery.test7"/>
    <ant dir="." antfile="build.xml" target="recovery.test8"/>
    <ant dir="." antfile="build.xml" target="recovery.test8_2"/>
    <ant dir="." antfile="build.xml" target="recovery.test8_3"/>
    <!--<ant dir="." antfile="build.xml" target="recovery.test9"/>
    <ant dir="." antfile="build.xml" target="recovery.test9_2"/>-->
</target>
<target name="tests.dist" description=" --> lauch all distributed tests">
    <ant dir="." antfile="build.xml" target="dist.test1"/>
    <ant dir="." antfile="build.xml" target="dist.test2"/>
    <ant dir="." antfile="build.xml" target="dist.test3"/>
    <ant dir="." antfile="build.xml" target="dist.test4"/>
</target>
<target name="tests.client" description=" --> lauch all client tests">
    <ant dir="." antfile="build.xml" target="client.test8"/>
    <ant dir="." antfile="build.xml" target="client.test13"/>
    <ant dir="." antfile="build.xml" target="client.test18"/>
    <ant dir="." antfile="build.xml" target="client.topic"/>
    <ant dir="." antfile="build.xml" target="client.topic2"/>
    <ant dir="." antfile="build.xml" target="client.qrmax"/>
    <ant dir="." antfile="build.xml" target="client.mcun"/>
    <ant dir="." antfile="build.xml" target="client.close1"/>
    <ant dir="." antfile="build.xml" target="client.close2"/>
    <ant dir="." antfile="build.xml" target="client.close3"/>
    <ant dir="." antfile="build.xml" target="client.close4"/>
    <ant dir="." antfile="build.xml" target="client.rqueue"/>
    <ant dir="." antfile="build.xml" target="client.tmpq"/>
    <ant dir="." antfile="build.xml" target="client.recover"/>
    <ant dir="." antfile="build.xml" target="client.servexc"/>
    <ant dir="." antfile="build.xml" target="client.cnxclose"/>
    <ant dir="." antfile="build.xml" target="client.cnxclose1"/>
    <ant dir="." antfile="build.xml" target="client.cnxclose2"/>
    <ant dir="." antfile="build.xml" target="client.cnxclose3"/>
    <ant dir="." antfile="build.xml" target="client.empty"/>
    <ant dir="." antfile="build.xml" target="client.redelivery"/>
    <ant dir="." antfile="build.xml" target="client.rollback"/>
    <ant dir="." antfile="build.xml" target="client.nowait"/>
    <ant dir="." antfile="build.xml" target="client.cnxtime_1"/>
    <ant dir="." antfile="build.xml" target="client.cnxtime_2"/>
    <ant dir="." antfile="build.xml" target="client.noloss_1"/>
    <ant dir="." antfile="build.xml" target="client.noloss_2"/>
</target>
<target name="tests.local" description=" --> lauch all local tests">
    <ant dir="." antfile="build.xml" target="local.test"/>
    <ant dir="." antfile="build.xml" target="local.test1"/>
    <ant dir="." antfile="build.xml" target="local.test2"/>
</target>   
<target name="tests.dursub" description=" --> lauch all dursub tests">
    <ant dir="." antfile="build.xml" target="dursub.test1"/>
    <ant dir="." antfile="build.xml" target="dursub.test2"/>
    <ant dir="." antfile="build.xml" target="dursub.test3"/>
    <ant dir="." antfile="build.xml" target="dursub.test4"/>
    <ant dir="." antfile="build.xml" target="dursub.unsub"/>
</target>  
<target name="tests.tcp" description=" --> lauch all tcp tests">
    <ant dir="." antfile="build.xml" target="tcp.test1"/>
    <ant dir="." antfile="build.xml" target="tcp.test2"/>
    <ant dir="." antfile="build.xml" target="tcp.test3"/>
    <ant dir="." antfile="build.xml" target="tcp.test4"/>
    <ant dir="." antfile="build.xml" target="tcp.test5"/>
</target>  
<target name="tests.reconf" description=" --> lauch all reconf tests">
    <ant dir="." antfile="build.xml" target="reconf.test"/>
    <ant dir="." antfile="build.xml" target="reconf.test1"/>
</target>  
<target name="tests.perf" description=" --> lauch all perf tests">
    <ant dir="." antfile="build.xml" target="perf.test5"/>
   <!-- <ant dir="." antfile="build.xml" target="perf.test6.all"/>
    <ant dir="." antfile="build.xml" target="perf.test6M"/>-->
    <ant dir="." antfile="build.xml" target="perf.test26"/>
    <ant dir="." antfile="build.xml" target="perf.test27"/>
    <ant dir="." antfile="build.xml" target="perf.test28"/>
    <ant dir="." antfile="build.xml" target="perf.test29"/>
    <ant dir="." antfile="build.xml" target="perf.test30"/>
    <ant dir="." antfile="build.xml" target="perf.test33"/>
    <ant dir="." antfile="build.xml" target="perf.test34"/>
    <ant dir="." antfile="build.xml" target="perf.test47"/>
    <ant dir="." antfile="build.xml" target="perf.test54"/>
    <ant dir="." antfile="build.xml" target="perf.asynctest"/>
</target>
<target name="tests.noreg" description=" --> lauch all noreg tests">
    <ant dir="." antfile="build.xml" target="noreg.test3"/>
    <ant dir="." antfile="build.xml" target="noreg.test4"/>
    <ant dir="." antfile="build.xml" target="noreg.test7"/>
    <ant dir="." antfile="build.xml" target="noreg.test8"/>
    <ant dir="." antfile="build.xml" target="noreg.test9"/>
    <ant dir="." antfile="build.xml" target="noreg.test10"/>
    <ant dir="." antfile="build.xml" target="noreg.test11"/>
    <ant dir="." antfile="build.xml" target="noreg.test12"/>
    <ant dir="." antfile="build.xml" target="noreg.test13"/>
    <ant dir="." antfile="build.xml" target="noreg.test14"/>
    <ant dir="." antfile="build.xml" target="noreg.test15"/>
    <ant dir="." antfile="build.xml" target="noreg.test16"/>
    <ant dir="." antfile="build.xml" target="noreg.test17"/>
    <ant dir="." antfile="build.xml" target="noreg.test19"/>
    <ant dir="." antfile="build.xml" target="noreg.test20"/>
    <ant dir="." antfile="build.xml" target="noreg.test21"/>
    <ant dir="." antfile="build.xml" target="noreg.test24"/>
    <ant dir="." antfile="build.xml" target="noreg.test25"/>
    <ant dir="." antfile="build.xml" target="noreg.test31"/>
    <ant dir="." antfile="build.xml" target="noreg.test32"/>
    <ant dir="." antfile="build.xml" target="noreg.test35"/>
    <ant dir="." antfile="build.xml" target="noreg.test39"/>
    <ant dir="." antfile="build.xml" target="noreg.test40"/>
    <ant dir="." antfile="build.xml" target="noreg.test41"/>
    <ant dir="." antfile="build.xml" target="noreg.test45"/>
    <ant dir="." antfile="build.xml" target="noreg.test46"/>
    <ant dir="." antfile="build.xml" target="noreg.test48"/>
    <ant dir="." antfile="build.xml" target="noreg.test49"/>
    <ant dir="." antfile="build.xml" target="noreg.test50"/>
    <ant dir="." antfile="build.xml" target="noreg.test51"/>
    <ant dir="." antfile="build.xml" target="noreg.test56"/>
</target>  
<target name="tests.xa" description=" --> lauch all xa tests">
    <ant dir="." antfile="build.xml" target="xa.test1"/>
    <ant dir="." antfile="build.xml" target="xa.test2"/>
    <ant dir="." antfile="build.xml" target="xa.test3"/>
    <ant dir="." antfile="build.xml" target="xa.test4"/>
</target>  

<target name="tests.jndi" description=" --> lauch all jndi tests">
    <ant dir="." antfile="build.xml" target="jndi.test1"/>
    <ant dir="." antfile="build.xml" target="jndi.test2"/>
    <ant dir="." antfile="build.xml" target="test.dtb"/>
    <ant dir="." antfile="build.xml" target="test.dtb2"/>
    <ant dir="." antfile="build.xml" target="test.dtb3"/>
    <ant dir="." antfile="build.xml" target="test.dtb4"/>
    <ant dir="." antfile="build.xml" target="test.dtb5"/>
    <ant dir="." antfile="build.xml" target="test.dtb.crash"/>
</target>  

<target name="tests.nocoupling" description=" --> lauch all jndi loose couplig tests">
    <ant dir="." antfile="build.xml" target="nocoupling.test1"/>
    <ant dir="." antfile="build.xml" target="nocoupling.test2"/>
    <ant dir="." antfile="build.xml" target="nocoupling.test3"/>
</target>  
<target name="tests.bridge" description=" --> lauch all bridge tests">
    <ant dir="." antfile="build.xml" target="bridge.test1"/>
    <ant dir="." antfile="build.xml" target="bridge.test2"/>
    <ant dir="." antfile="build.xml" target="bridge.test3"/>
    <ant dir="." antfile="build.xml" target="bridge.test4"/>
    <ant dir="." antfile="build.xml" target="bridge.test5"/>
    <ant dir="." antfile="build.xml" target="bridge.test6"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest1"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest2"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest3"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest4"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest5"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest6"/>
</target>  
<target name="tests.schedqueue" description=" --> lauch all schedqueue tests">
    <ant dir="." antfile="build.xml" target="schedqueue.test1"/>
    <ant dir="." antfile="build.xml" target="schedqueue.test2"/>
</target>  
<target name="tests.cluster" description=" --> lauch all cluster tests">
    <ant dir="." antfile="build.xml" target="cluster.test1"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ1"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ2"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ3"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ4"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ5"/>
</target>  
<target name="tests.hierarchical" description=" --> lauch all hierarchical tests">
    <ant dir="." antfile="build.xml" target="hierarchical.test1"/>
</target>   
<target name="tests.ssl" description=" --> lauch all ssl tests">
    <ant dir="." antfile="build.xml" target="ssl.test"/>
</target> 




  <target name="init.src">
    <!-- Tests specific sources set -->
    <patternset id="specific">
      <include name="**/**/*.java"/>
    </patternset>
  </target>

  <!-- Include generic part -->
&common;
&buila3;	
    <target name="init.test.joram" depends="init">
    <antcall target="init.test" inheritAll="true">
      <param name="a3debug" value="a3debug.cfg"/>
    </antcall>
    <copy file="${jndiconf}" tofile="${test.dir}/jndi.properties" />
  </target>

  <target name="test.run">
    <java classname="${className}"
        failonerror="no" fork="yes" maxmemory="256m"
        dir="${test.dir}">
      <classpath path="${project.class.path}"/>
      <jvmarg line="-Dcom.sun.management.jmxremote -DMXServer=com.scalagent.jmx.JMXServer -Dframework.TestCase.TestId=0 -Dframework.TestCase.OutFile=${report.file} ${jvmargs}"/>
      <!-- jvmarg line="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y"/ -->
      <arg line="${arg}"/>
    </java>
  </target>

  <target name="test.start" depends="init.test.joram">
    <antcall target="test.run" inheritAll="true"/>
  </target>

<target name="base.test_Q_M" description=" --> test if the message receive is the same that the message sent, with queue">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="base.Test_Q_M"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
 </target>

<target name="base.test_T_M" description=" --> test if the message receive is the same that the message sent, with topic">
   <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="base.Test_T_M"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="base.test_Q_MText" description=" --> test if the text message receive is the same that the message sent, with queue">
   <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="base.Test_Q_MText"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
   </antcall>
</target>


<target name="base.test_T_MText" description=" --> test if the text message receive is the same that the message sent, with topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_T_MText"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Q_MObj" description=" --> test if the object message receive is the same that the message sent, with queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Q_MObj"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_T_MObj" description=" --> test if the object message receive is the same that the message sent, with topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_T_MObj"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Q_MByte" description=" --> test if the byte message receive is the same that the message sent, with queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Q_MByte"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_T_MByte" description=" --> test if the byte message receive is the same that the message sent, with topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_T_MByte"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Q_MMap" description=" --> test if the Map message receive is the same that the message sent, with queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Q_MMap"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_T_MMap" description=" --> test if the Map message receive is the same that the message sent, with topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_T_MMap"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Q_MStream" description=" --> test if the Stream message receive is the same that the message sent, with queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Q_MStream"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_T_MStream" description=" --> test if the Stream message receive is the same that the message sent, with topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_T_MStream"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_property_Q" description=" --> test if the message properties are transmit with a queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_property_Q"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_property_T" description=" --> test if the message properties are transmit with a topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_property_T"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Selector_Q" description=" --> test the message selector with a queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Selector_Q"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Selector_T" description=" --> test the message selector with a topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Selector_T"/>
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Temp_Q" description=" --> test the functioning of Temporary Queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Temp_Q"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Temp_T" description=" --> test the functioning of Temporary Topic">
  <antcall target="test.start" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="className" value="base.Test_Temp_T"/>
    <param name="jndiconf" value="base/jndi.properties"/>
    <param name="a3conf" value="base/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
    <param name="args" value=""/>
  </antcall>
</target>
<target name="base.test_Temp_T2" description=" --> tests delete temporay topic when connection close">
  <antcall target="test.start" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="className" value="base.Test_Temp_T2"/>
    <param name="jndiconf" value="base/jndi.properties"/>
    <param name="a3conf" value="base/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
    <param name="args" value=""/>
  </antcall>
</target>
<target name="base.test_Brows_Q" description=" --> test the functioning of browser with Queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Brows_Q"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>


<target name="base.test_MsgList_T" description=" --> test the functioning of message listener">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_MsgList_T"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>								   
	
<target name="base.test_Exp_Q" description=" --> test the message expiration with a queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Exp_Q"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>

<target name="base.test_dmqb" description=" --> test that a message body is not delete on a Dqueue when restart server">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_DMQ_Body"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_CAck1_Q" description=" --> test client_acknowledgement with one message and  with a queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_CAck1_Q"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_CAck1_T" description=" --> test client_acknowledgement with one message and  with a topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_CAck1_T"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_CAck2_Q" description=" --> test client_acknowledgement with three messages, one acknowledgement and  with a queue.">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_CAck2_Q"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_CAck2_T" description=" --> test client_acknowledgement with three messages, one acknowledgement and with a topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_CAck2_T"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_CAck3_Q" description=" --> test client_acknowledgement. The message is redelivred when a session is close not a consumer">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_CAck3_Q"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_Trans_Q" description=" --> test transcated session method with a queue.">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Trans_Q"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>

<target name="base.test_Trans_T" description=" --> test transcated session method with a topic.">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_Trans_T"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>

<target name="base.test_ExcpList_Q" description=" --> test ExceptionListener with a queue.">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_ExcpList_Q"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="base.test_ExcpList_T" description=" --> test ExceptionListener with a topic.">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="base.Test_ExcpList_T"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>

<target name="base.test_Multi_Q" description=" --> check send and receive message with 500 queue">
  <antcall target="test.start" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="className" value="base.Test_Multi_Q"/>
    <param name="jndiconf" value="base/jndi.properties"/>
    <param name="a3conf" value="base/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<!-- test ha -->


<target name="ha.test1" description=" --> test ha with 2 active server.">
   <antcall target="test.start" inheritAll="true">
     <param name="className" value="ha.HATest"/>  
     <param name="jndiconf" value="ha/jndi.properties"/>
     <param name="a3conf" value="ha/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="ha.test2" description=" --> test ha with 1 active server.">
   <antcall target="test.start" inheritAll="true">
     <param name="className" value="ha.HATest2"/>  
     <param name="jndiconf" value="ha/jndi.properties"/>
     <param name="a3conf" value="ha/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<!-- fin test ha -->

<!-- test recovery -->
<target name="recovery.test1" description=" --> test recovery with queue and kill servers after send message and before receive">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="recovery.Recover_1"/>  
     <param name="jndiconf" value="recovery/jndi.properties"/>
     <param name="a3conf" value="recovery/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="recovery.test2" description=" --> test recovery with queue and kill server before ack all messages">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="recovery.Recover_2"/>  
     <param name="jndiconf" value="recovery/jndi.properties"/>
     <param name="a3conf" value="recovery/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="recovery.test3" description=" --> test recovery with topic and kill servers after send message and before receive">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="recovery.Recover_3"/>  
     <param name="jndiconf" value="recovery/jndi.properties"/>
     <param name="a3conf" value="recovery/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="recovery.test4" description=" --> test recovery with topic and kill server before ack all messages">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="recovery.Recover_4"/>  
     <param name="jndiconf" value="recovery/jndi.properties"/>
     <param name="a3conf" value="recovery/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="recovery.test5" description=" --> Test recovery : kill server during receive">
   <antcall target="test.start" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="className" value="recovery.ReliableTest"/>
    <param name="jndiconf" value="recovery/jndi.properties"/>
    <param name="a3conf" value="recovery/a3servers.xml"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
    <param name="args" value=""/>
  </antcall>
</target>


<target name="recovery.test6" description=" --> test recovery with 2 server and a durablesubscriber.  ">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="recovery.Test6"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jndiconf" value="recovery/jndi.properties"/>
    <param name="a3conf" value="recovery/a3servers3.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="recovery.test7" description=" --> test recovery with 1 server and a durablesubscriber."  >
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="recovery.Test7"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="recovery/jndi.properties"/>
    <param name="a3conf" value="recovery/a3servers.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="recovery.test8" description=" --> test  the DMQ recovery">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="recovery.Test8"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jndiconf" value="recovery/jndi.properties"/>
    <param name="a3conf" value="recovery/a3servers3.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>
<target name="recovery.test8_2" description=" --> test  the DMQ recovery. DMQ is on other server">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="recovery.Test8_2"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jndiconf" value="recovery/jndi.properties"/>
    <param name="a3conf" value="recovery/a3servers3.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>
<target name="recovery.test8_3" description=" --> test  the DMQ recovery">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="recovery.Test8_3"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jndiconf" value="recovery/jndi.properties"/>
    <param name="a3conf" value="recovery/a3servers3.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>


<target name="recovery.test9" depends="init">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="recovery.Test9"/>
    <param name="jndiconf" value="recovery/jndi.properties"/>
    <param name="a3conf" value="recovery/a3servers4.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DMsgSize=10240"/>
  </antcall>
</target>
<target name="recovery.test9_2" depends="init" description=" --> test recovery with several big message">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="recovery.Test9_2"/>
    <param name="jndiconf" value="recovery/jndi.properties"/>
    <param name="a3conf" value="recovery/a3servers4.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DMsgSize=10240"/>
  </antcall>
</target>
 

<!-- fin test recovery -->

<!-- test distributed -->

<target name="dist.test1" description=" --> test distributed with 2 serveurs and queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="distrib.Distrib_2serv"/>  
     <param name="jndiconf" value="distrib/jndi.properties"/>
     <param name="a3conf" value="distrib/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="dist.test2" description=" --> test distributed with 3 serveurs and queue">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="distrib.Distrib_3serv"/>  
     <param name="jndiconf" value="distrib/jndi.properties"/>
     <param name="a3conf" value="distrib/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="dist.test3" description=" --> test distributed with 2 serveurs and topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="distrib.Distrib_2serv_T"/>  
     <param name="jndiconf" value="distrib/jndi.properties"/>
     <param name="a3conf" value="distrib/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<target name="dist.test4" description=" --> test distributed with 3 serveurs and topic">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="distrib.Distrib_3serv_T"/>  
     <param name="jndiconf" value="distrib/jndi.properties"/>
     <param name="a3conf" value="distrib/a3servers.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
<!-- fin test distributed -->


<!-- test admin -->
<target name="admin.test" description=" --> test admin configuration">
   <antcall target="test.start" inheritAll="true">
     <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
     <param name="className" value="admin.AdminTest1"/>  
     <param name="jndiconf" value="base/jndi.properties"/>
     <param name="a3conf" value="base/a3servers1.xml"/>
     <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>

<!-- fin test admin -->


<!-- test client -->

<target name="client.test8" description=" --> test delete temporary queue">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest8"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.test13" description=" --> Reproduce bug in ClientSubscription">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest13"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.test18" description=" --> Checks that a message listener can send messages ">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest18"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.mcun" description=" --> concurrent close consumer and a consumer listener">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.MsgConsUnsubscribe"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.topic" depends="init,compile" description=" --> send 100000 messages ans receive it,  test memory leak" >
    <delete dir="${test.dir}"/>
    <mkdir dir="${test.dir}"/>
    <copy file="client/a3servers.xml" tofile="${test.dir}/a3servers.xml"/>
    <copy file="a3config.dtd" tofile="${test.dir}/a3config.dtd"/>
    <copy file="a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>
    <parallel>
      <antcall target="test.run" inheritAll="true">
        <param name="className" value="client.TopicPublisher"/>
        <param name="jvmargs" value=""/>
        <param name="args" value=""/>
      </antcall>
      <antcall target="test.run" inheritAll="true">
        <param name="className" value="client.TopicListener"/>
        <param name="jvmargs" value=""/>
        <param name="args" value=""/>
      </antcall>
    </parallel>
</target>


<target name="client.topic2" description=" --> send message during 60s and receive it with 2 consumer, test memory leak">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest23"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>



<target name="client.qrmax" description=" --> configure queueMessageReadMax that the consumer receive more message with one request">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.QueueReadMaxTest"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.close1" description=" --> test close connection">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ConnectionClose"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.close4" description=" --> test close connection with a exceptionlistener">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ConnectionClose4"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.close3" description=" --> producer send messages when kill server.">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ConnectionClose3"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.close2" description=" --> producer send messages when close the session.">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ConnectionClose2"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.test5" description=" --> three tests, an anticipated connection, connection stop,  connection close  .">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.rqueue" description=" --> closing a message consumer or connection must clean the receive requests from the queue.">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest10"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>


<target name="client.tmpq" description=" --> To close a tmpQueue, close consumer attach. There is exception when send to invalid queue">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest6"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.recover" description=" --> Session recover from a message listener.">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest5"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.servexc" description=" --> kill a server and try to receive, there is a exception">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest4"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.cnxclose1" description=" --> try to receive when closing connection">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest3"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.cnxclose3" description=" --> try to receive 1)when closing connection, 2)when closing a session, 3) when closing consumer">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest2"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.cnxclose2" description=" --> try to receive 1)when closing consumer, 2)when closing a session">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest19"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="client.cnxclose" description=" --> Test connection closure diagnostic.">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest22"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

 <target name="client.empty" description=" --> Check that sending an empty ObjectMessage leads to receiving an ObjectMessage">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest24"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.redelivery" description=" --> when a consumer abord receive, the message receive is redelivred">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest21"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.rollback" description=" --> test rollback : 1) when closing consumer, 2) when closing session, 3) when closing connection">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest20"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.nowait" description=" --> receiveNoWait must return null if the connection is not started">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest17"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>


<target name="client.cnxtime_1" depends="init,compile" description=" --> when kill client with connectingtimer, context is destroy after connectingtimer">
     <delete dir="${test.dir}"/>
    <mkdir dir="${test.dir}"/>
    <copy file="client/a3servers.xml" tofile="${test.dir}/a3servers.xml"/>
    <copy file="a3config.dtd" tofile="${test.dir}/a3config.dtd"/>
    <copy file="a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>
    <parallel>
      <java classname="fr.dyade.aaa.agent.AgentServer"
            failonerror="no" fork="yes"
            dir="${test.dir}">
        <classpath path="${project.class.path}"/>
        <arg line="0 ./s0"/>
      </java>
      <sequential>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="client.ClientTest16"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
        <sleep seconds="8"/>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="client.ClientTest16_2"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
      </sequential>
    </parallel>
  </target>




<target name="client.cnxtime_2" depends="init,compile" description=" --> when kill client with connectingtimer, context is not destroy before connectingtimer" >
     <delete dir="${test.dir}"/>
    <mkdir dir="${test.dir}"/>
    <copy file="client/a3servers.xml" tofile="${test.dir}/a3servers.xml"/>
    <copy file="a3config.dtd" tofile="${test.dir}/a3config.dtd"/>
    <copy file="a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>
    <parallel>
      <java classname="fr.dyade.aaa.agent.AgentServer"
            failonerror="no" fork="yes"
            dir="${test.dir}">
        <classpath path="${project.class.path}"/>
        <arg line="0 ./s0"/>
      </java>
      <sequential>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="client.ClientTest16"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
        <sleep seconds="2"/>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="client.ClientTest16_2"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
      </sequential>
    </parallel>
  </target>


<target name="client.noloss_1" description=" --> Check that there are no messages loss during closure of session ">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest12"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<target name="client.noloss_2" description=" --> Check that there are no messages loss during an asynchrnous close of session ">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="client.ClientTest11"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>

<!-- fin test client -->


<!-- local test -->

<target name="local.test" description=" --> Test messages transmission with a local configuration">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="local.LocalTest"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="local.test1" description=" --> tests the local replies mechanism">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="local.CommitTest"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
 </target>
<target name="local.test2" description=" --> test local connection without sever init and with server init">
    <antcall target="test.start" inheritAll="true">
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="className" value="local.Test2"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="local/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
   </antcall>
</target>
<!-- end local test -->

<!-- durablesubsciber test -->

<target name="dursub.test1" description=" --> test about creation of durable subscriber">
    <antcall target="test.start" inheritAll="true">
      <param name="className" value="dursub.Test1"/>
      <param name="jndiconf" value="dursub/jndi.properties"/>
      <param name="a3conf" value="dursub/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="dursub.test2" description=" --> test receive message, after kill and restart durablesubscriber">
    <antcall target="test.start" inheritAll="true">
      <param name="className" value="dursub.Dursub_1"/>
      <param name="jndiconf" value="dursub/jndi.properties"/>
      <param name="a3conf" value="dursub/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="dursub.test3" description=" --> Check that two durable subscriptions do not interfere when consuming their messages">
    <antcall target="test.start" inheritAll="true">
      <param name="className" value="dursub.Dursub_2"/>
      <param name="jndiconf" value="dursub/jndi.properties"/>
      <param name="a3conf" value="dursub/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

<target name="dursub.test4" depends="init,compile" description=" --> test dursub when kill and restart a client">
     <delete dir="${test.dir}"/>
    <mkdir dir="${test.dir}"/>
    <copy file="dursub/a3servers1.xml" tofile="${test.dir}/a3servers.xml"/>
    <copy file="a3config.dtd" tofile="${test.dir}/a3config.dtd"/>
    <copy file="a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>
    <parallel>
      <java classname="fr.dyade.aaa.agent.AgentServer"
            failonerror="no" fork="yes"
            dir="${test.dir}">
        <classpath path="${project.class.path}"/>
        <arg line="0 ./s0"/>
      </java>
      <sequential>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="dursub.DurTest2"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
        <sleep seconds="5"/>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="dursub.DurTest2_2"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
      </sequential>
    </parallel>
  </target>

<target name="dursub.unsub" description=" --> test unsubscribe with a null subscription name">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="dursub.Test2"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="dursub/jndi.properties"/>
    <param name="a3conf" value="dursub/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>
<!-- end durablesubsciber test -->

<!-- test tcp -->

<target name="tcp.test1" description=" --> Test messages transmission with a tcp configuration">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="tcp.Test"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="tcp.test2" description=" --> Test receive messge : Use 3 servers.1 for producer, 1 for consumer, 1 for queue and topic">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="tcp.Test2"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="tcp.test3" description=" --> test call of exception when recieve a message and when stop a server">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="tcp.Test3"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="tcp.test4" description=" --> test call of exception when stop a server">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="tcp.Test4"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<target name="tcp.test5" description=" --> test call of exception when use a bad password">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="tcp.Test5"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
</target>
<!-- end test tcp -->


<!--  test reconf -->

<target name="reconf.test" description=" --> test reconfiguration server">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="reconf.ReconfTest"/>
      <param name="jndiconf" value="reconf/jndi.properties"/>
      <param name="a3conf" value="reconf/a3servers.xml"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
   </antcall>
</target>

<target name="reconf.test1" description=" --> test reconfiguration server with exception">
    <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="reconf.ReconfTest2"/>
      <param name="jndiconf" value="reconf/jndi.properties"/>
      <param name="a3conf" value="reconf/a3servers.xml"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
   </antcall>
</target>
<!-- end test reconf -->












<!-- perf test -->


<target name="perf.asynctest">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perf.AsyncTest" />
    <param name="jndiconf" value="perfs/jndi.properties" />
    <param name="a3conf" value="perfs/a3servers.xml" />
    <param name="jvmargs" value="" />
    <param name="args" value="" />
  </antcall>
</target>

<target name="perf.test5" depends="init,compile" description=" --> test time between sender and receiver with queue or topic">
  <antcall target="init.test.joram" inheritAll="true">
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
  </antcall>
  <parallel>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="perfs.ServerTest5"/>
      <param name="jvmargs" value="-DNbClients=4"/>
    </antcall>
    <sequential>
      <sleep seconds="1"/>
      <parallel>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="perfs.Test5"/>
          <param name="jndiconf" value="perfs/jndi.properties"/>
          <param name="jvmargs" value="-Dhostname=localhost -DDestination=org.objectweb.joram.client.jms.Queue"/>
        </antcall>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="perfs.Test5"/>
          <param name="jndiconf" value="perfs/jndi.properties"/>
          <param name="jvmargs" value="-Dhostname=localhost -DDestination=org.objectweb.joram.client.jms.Topic"/>
        </antcall>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="perfs.Test5"/>
          <param name="jndiconf" value="perfs/jndi.properties"/>
          <param name="jvmargs" value="-Dhostname=localhost -DDestination=org.objectweb.joram.client.jms.Queue"/>
        </antcall>
        <antcall target="test.run" inheritAll="true">
          <param name="className" value="perfs.Test5"/>
          <param name="jndiconf" value="perfs/jndi.properties"/>
          <param name="jvmargs" value="-Dhostname=localhost -DDestination=org.objectweb.joram.client.jms.Topic"/>
        </antcall>
      </parallel>
    </sequential>
  </parallel>
</target>


<target name="init6">
    <property name="MsgTransient" value="false"/>
    <property name="SubDurable" value="false"/>
    <property name="NbRound" value="1000"/>
    <property name="NbMsgPerRound" value="100"/>
</target>

<target name="perf.test6.all">
  <ant dir="." antfile="build.xml" target="perf.test6"/>
  <ant dir="." antfile="build.xml" target="perf.test6_Ntrans_1"/>
  <ant dir="." antfile="build.xml" target="perf.test6_Nulltrans_1"/>
  <ant dir="." antfile="build.xml" target="perf.test6_Ntrans_2"/>
  <ant dir="." antfile="build.xml" target="perf.test6_Nulltrans_2"/>
</target>


<target name="perf.test6" description=" --> check time of send and receive message with option : ColocatedBaseTest or TcpBaseTest and queue or topic with GCEngine and NTransaction ">
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="false"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="false"/>
  </antcall>
</target>


  <!-- Run Test6 with transacted mode set -->
<target name="perf.test6_Ntrans_1" description=" --> check time of send and receive message with option :ColocatedBaseTest or TcpBaseTest and Engine or GCEngine and queue or topic with Transacted and NTransaction" >
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="Transacted" value="true"/>
  </antcall>
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="true"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="Transacted" value="true"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="true"/>
  </antcall>
</target>
  
 <!-- Run Test6 with transacted mode set -->
<target name="perf.test6_Nulltrans_1" description=" --> check time of send and receive message with option :ColocatedBaseTest or TcpBaseTest and Engine or GCEngine and queue or topic with Transacted and NullTransaction" >
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="Transacted" value="true"/>
  </antcall>
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="true"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="Transacted" value="true"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="true"/>
  </antcall>
</target>

  <!-- Run Test6 with transacted mode unset -->
<target name="perf.test6_Ntrans_2" description=" --> check time of send and receive message with option :ColocatedBaseTest or TcpBaseTest and Engine or GCEngine and queue or topic with no Transacted and NTransaction">
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="Transacted" value="false"/>
  </antcall>
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="false"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="Transacted" value="false"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="false"/>
  </antcall>
</target>

  <!-- Run Test6 with transacted mode unset -->
<target name="perf.test6_Nulltrans_2" description=" --> check time of send and receive message with option :ColocatedBaseTest or TcpBaseTest and Engine or GCEngine and queue or topic with no Transacted and NullTransaction">
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
     <param name="Transacted" value="false"/>
  </antcall>
  <antcall target="test6-1.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="false"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="Transacted" value="false"/>
  </antcall>
  <antcall target="test6-2.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="Transacted" value="false"/>
  </antcall>
</target>

<!-- Used by the previous targets -->
<target name="test6-1.perf" depends="init6">
  <antcall target="test6-x.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
    <param name="BaseClass" value="perfs.ColocatedBaseTest"/>
    <param name="NbProdCons" value="1"/>
    <param name="MsgSize" value="25"/>
  </antcall>
  <antcall target="test6-x.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
    <param name="BaseClass" value="perfs.TcpBaseTest"/>
    <param name="NbProdCons" value="1"/>
    <param name="MsgSize" value="25"/>
  </antcall>
</target>

<target name="test6-2.perf" depends="init6">
  <antcall target="test6-x.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
    <param name="BaseClass" value="perfs.ColocatedBaseTest"/>
    <param name="NbProdCons" value="1"/>
    <param name="MsgSize" value="25"/>
  </antcall>
  <antcall target="test6-x.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
    <param name="BaseClass" value="perfs.TcpBaseTest"/>
    <param name="NbProdCons" value="1"/>
    <param name="MsgSize" value="25"/>
  </antcall>
</target>
<!-- end : Used by the previous targets -->


<target name="perf.test6_3" description=" --> check time of send and receive message with option :ColocatedBaseTest and GCEngine and queue or topic with different value of NbRound and NbMsgPerRound ">
  <antcall target="test6-x.perf" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
    <param name="BaseClass" value="perfs.ColocatedBaseTest"/>
    <param name="Transacted" value="false"/>
    <param name="MsgTransient" value="false"/>
    <param name="SubDurable" value="false"/>
    <param name="NbProdCons" value="1"/>
    <param name="NbRound" value="1000"/>
    <param name="NbMsgPerRound" value="100"/>
    <param name="MsgSize" value="25"/>
  </antcall>
  <antcall target="test6-x.perf" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
    <param name="BaseClass" value="perfs.ColocatedBaseTest"/>
    <param name="Transacted" value="false"/>
    <param name="MsgTransient" value="false"/>
    <param name="SubDurable" value="true"/>
    <param name="NbProdCons" value="1"/>
    <param name="NbRound" value="1000"/>
    <param name="NbMsgPerRound" value="100"/>
    <param name="MsgSize" value="25"/>
  </antcall>
  <antcall target="test6-x.perf" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
    <param name="BaseClass" value="perfs.ColocatedBaseTest"/>
    <param name="Transacted" value="false"/>
    <param name="MsgTransient" value="false"/>
    <param name="SubDurable" value="false"/>
    <param name="NbProdCons" value="1"/>
    <param name="NbRound" value="100"/>
    <param name="NbMsgPerRound" value="1000"/>
    <param name="MsgSize" value="25"/>
  </antcall>
  <antcall target="test6-x.perf" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
    <param name="BaseClass" value="perfs.ColocatedBaseTest"/>
    <param name="Transacted" value="false"/>
    <param name="MsgTransient" value="false"/>
    <param name="SubDurable" value="true"/>
    <param name="NbProdCons" value="1"/>
    <param name="NbRound" value="100"/>
    <param name="NbMsgPerRound" value="1000"/>
    <param name="MsgSize" value="25"/>
  </antcall>
</target>

<target name="perf.test6_4" description=" --> check time of send and receive message with option :ColocatedBaseTest and GCEngine and topic with  NbRound = NbMsgPerRound">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test6"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=joram.perfs.ColocatedBaseTest -DTransacted=false -DNbSender=1 -DNbReceiver=1 -DNbDestination=1 -DNbRound=100 -DNbMsgPerRound=100 -DMsgSize=25 -DMsgTransient=false -DSubDurable=true"/>
  </antcall>
</target>

<target name="test6-yjp.perf">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test6"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-agentlib:yjpagent=port=12000 -DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=joram.perfs.ColocatedBaseTest -DTransacted=false -DNbSender=1 -DNbReceiver=1 -DNbDestination=1 -DNbRound=10000 -DNbMsgPerRound=100 -DMsgSize=25 -DMsgTransient=false -DSubDurable=true"/>
  </antcall>
</target>


<!-- Used by the previous targets  -->
<target name="test6-x.perf" depends="init">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test6"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DDestination=${Destination} -DBaseClass=${BaseClass} -DTransacted=${Transacted} -DNbSender=${NbProdCons} -DNbReceiver=${NbProdCons} -DNbDestination=${NbProdCons} -DNbRound=${NbRound} -DNbMsgPerRound=${NbMsgPerRound} -DMsgSize=${MsgSize} -DMsgTransient=${MsgTransient} -DSubDurable=${SubDurable}"/>
  </antcall>
</target>

<!-- Multi-sender tests -->
  <target name="perf.test6M" depends="test6M-1.perf,test6M-2.perf,test6M-3.perf,test6M-4.perf, test6M-5.perf,test6M-6.perf,test6M-7.perf,test6M-8.perf" description="check time of send and receive message with option :queue or topic and ColocatedBaseTest or TcpBaseTest and multiThreadSync (true or false) and  multiCnx( true or false) " />

<target name="perf.test6M_base" depends="init">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test6" />
    <param name="jndiconf" value="perfs/jndi.properties" />
    <param name="a3conf" value="perfs/a3servers5.xml" />
    <param name="jvmargs" value="-DDestination=${Destination} -DBaseClass=${BaseClass} 
                -DTransacted=${Transacted} 
                -DNbSender=${NbSender} -DNbReceiver=${NbReceiver} 
                -DNbDestination=1 
                -DNbRound=${NbRound} -DNbMsgPerRound=${NbMsgPerRound} 
                -DMsgSize=${MsgSize} 
                -DMsgTransient=${MsgTransient} 
                -DSubDurable=${SubDurable}
                -DdupsOk=${dupsOk}
                -DqueueMessageReadMax=${queueMessageReadMax}
                -DtopicAckBufferMax=${topicAckBufferMax}
                -DmultiThreadSync=${multiThreadSync}
                -DmultiThreadSyncDelay=${multiThreadSyncDelay}
                -DmultiCnx=${multiCnx}" />
  </antcall>
</target>

<target name="test6M-a.perf">
  <antcall target="perf.test6M_base" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine" />
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction" />
    <param name="Transacted" value="false" />
    <param name="MsgTransient" value="true" />
    <param name="NbSender" value="1" />
    <param name="NbReceiver" value="1" />
    <param name="NbRound" value="100" />
    <param name="NbMsgPerRound" value="300" />
    <param name="MsgSize" value="25" />
    <param name="SubDurable" value="true" />
    <param name="dupsOk" value="true" />
    <param name="queueMessageReadMax" value="50" />
    <param name="topicAckBufferMax" value="50" />
    <param name="multiThreadSyncDelay" value="1" />
  </antcall>
</target>

<target name="test6M-1.perf">
  <antcall target="test6M-a.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue" />
    <param name="BaseClass" value="perfs.ColocatedBaseTest" />
    <param name="multiThreadSync" value="true" />
    <param name="multiCnx" value="false" />
  </antcall>
</target>

<target name="test6M-2.perf">
  <antcall target="test6M-a.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic" />
    <param name="BaseClass" value="perfs.ColocatedBaseTest" />
    <param name="multiThreadSync" value="true" />  
    <param name="multiCnx" value="false" />
  </antcall>
</target>

<target name="test6M-3.perf">
  <antcall target="test6M-a.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue" />
    <param name="BaseClass" value="perfs.ColocatedBaseTest" />
    <param name="multiThreadSync" value="false" />
    <param name="multiCnx" value="true" />
  </antcall>
</target>

<target name="test6M-4.perf">
  <antcall target="test6M-a.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic" />
    <param name="BaseClass" value="perfs.ColocatedBaseTest" />
    <param name="multiThreadSync" value="false" />
    <param name="multiCnx" value="true" />
  </antcall>
</target>

<target name="test6M-5.perf">
  <antcall target="test6M-a.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue" />
    <param name="BaseClass" value="perfs.TcpBaseTest" />
    <param name="multiThreadSync" value="true" />
    <param name="multiCnx" value="false" />
  </antcall>
</target>

<target name="test6M-6.perf">
  <antcall target="test6M-a.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic" />
    <param name="BaseClass" value="perfs.TcpBaseTest" />
    <param name="multiThreadSync" value="true" />
    <param name="multiCnx" value="false" />
  </antcall>
</target>

<target name="test6M-7.perf">
  <antcall target="test6M-a.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue" />
    <param name="BaseClass" value="perfs.TcpBaseTest" />
    <param name="multiThreadSync" value="false" />
    <param name="multiCnx" value="true" />
  </antcall>
</target>

<target name="test6M-8.perf">
  <antcall target="test6M-a.perf" inheritAll="true">
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic" />
    <param name="BaseClass" value="perfs.TcpBaseTest" />
    <param name="multiThreadSync" value="false" />
    <param name="multiCnx" value="true" />
  </antcall>
</target>


<target name="perf.test6M-X" description=" --> check time of send and receive message with option :queue or topic and ColocatedBaseTest or TcpBaseTest. value of paramater increase">
  <antcall target="test6M-b.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction" />
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue" />
    <param name="BaseClass" value="perfs.ColocatedBaseTest" />
    <param name="multiThreadSync" value="true" />
  </antcall>
  <antcall target="test6M-b.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction" />
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue" />
    <param name="BaseClass" value="perfs.TcpBaseTest" />
    <param name="multiThreadSync" value="true" />
  </antcall>
  <antcall target="test6M-b.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction" />
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic" />
    <param name="BaseClass" value="perfs.ColocatedBaseTest" />
    <param name="multiThreadSync" value="true" />
  </antcall>
  <antcall target="test6M-b.perf" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction" />
    <param name="Destination" value="org.objectweb.joram.client.jms.Topic" />
    <param name="BaseClass" value="perfs.TcpBaseTest" />
    <param name="multiThreadSync" value="true" />
  </antcall>
</target>


<target name="test6M-b.perf">
  <antcall target="test6M-base.perf" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine" />
    <param name="Transacted" value="false" />
    <param name="MsgTransient" value="false" />
    <param name="NbSender" value="20" />
    <param name="NbReceiver" value="1" />
    <param name="NbRound" value="100" />
    <param name="NbMsgPerRound" value="100" />
    <param name="MsgSize" value="25" />
    <param name="SubDurable" value="true" />
    <param name="dupsOk" value="false" />
    <param name="queueMessageReadMax" value="1000" />
    <param name="topicAckBufferMax" value="1000" />
    <param name="multiThreadSyncDelay" value="1" />
    <param name="multiCnx" value="false" />
  </antcall>
</target>

<target name="perf.test26" description=" --> Simple test for measure travel time. Several different parameter">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test26"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DBaseClass=perfs.ColocatedBaseTest -DTransacted=false -DNbReceiver=1 -DNbRound=100 -DNbMsgPerRound=100 -DMsgSize=25 -DMsgTransient=false -DSubDurable=true"/>
  </antcall>
</target>

<target name="perf.test27" description=" --> CarrierIQ Scenario. Measure travel time." >
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test27"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNbMsg=5000 -DMsgSize=25 -Dorg.objectweb.joram.client.jms.queueMsgCount=50 -DNTLogFileSize=512 -DConnectionManager.inFlow=500/>"/>
  </antcall>
</target>
<target name="perf.test27_bis" description=" --> CarrierIQ Scenario. Measure travel time." >
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test27"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNbMsg=500000 -DMsgSize=25 -Dorg.objectweb.joram.client.jms.queueMsgCount=50 -DNTLogFileSize=512 -DConnectionManager.inFlow=500/>"/>
  </antcall>
</target>


<target name="perf.test28" description=" --> Test the impact of a durable subscription on the performances of a normal subscription">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test28"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DDurable=true"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test28"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DDurable=false"/>
  </antcall>
</target>

<target name="perf.test29" description=" --> Several messages on some destination. Counts of msg/s for the receiver">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test29"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNbMaxAgents=1000 -DNbMsg=100 -DNbDest=300"/>
  </antcall>
</target>

<target name="perf.test30" description=" --> check creation of multiple connection and queue.Counts of msg/s for the receiver and sender ">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test30"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-Xms2m -Xmx1024m -DNbMaxAgents=1000 -DNbMsg=100 -DNbDest=150"/>
  </antcall>
</target>

<target name="perf.test33" description=" --> Memory test with TTL">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test33"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="perf.test34_bis" description=" --> test : msg/s with different parameter :NbMsg, NTLogMemorySize ">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=10000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=10000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=10000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=10000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=50000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=32 -DNTLogMemorySize=16384 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=80000"/>
  </antcall>
</target>
 

<target name="perf.test34" description=" --> test : msg/s with different parameter :NbMsg, NTLogMemorySize / launch with target all">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=10000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=1000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=1000"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=500"/>
  </antcall>
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test34"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=32 -DNTLogMemorySize=16384 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=800"/>
  </antcall>
</target>
 





<target name="perf.test47" description=" --> Test time to send, to receive.">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test47"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers3.xml"/>
    <param name="jvmargs" value="-DNbRound=25 -DNbMsgPerRound=100"/>
  </antcall>
</target>

<target name="perf.test54" description=" --> test management memory ">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="perfs.Test54"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="perfs/jndi.properties"/>
    <param name="a3conf" value="perfs/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>



<!-- end perf test -->



<!-- start noreg -->

<target name="noreg.test3" description=" --> Test transfert with big messages">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test3"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DMsgSize=5000 -DMsgPerCommit=1 -DNbMsg=10"/>
  </antcall>
    <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test3"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DMsgSize=5000 -DMsgPerCommit=4 -DNbMsg=10"/>
  </antcall>
</target>

<target name="noreg.test4">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test4"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test7_bis" description=" --> check system property and create multiple queue" >
  <antcall target="noreg.test7_2" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
    <param name="BaseClass" value="noreg.ColocatedBaseTest"/>
    <param name="NbDest" value="500"/>
    <param name="NbMsg" value="100"/>
    <param name="MsgSize" value="25"/>
  </antcall>
</target>
<target name="noreg.test7" description=" --> check system property and create multiple queue / lazunch with target all" >
  <antcall target="noreg.test7_2" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
    <param name="BaseClass" value="noreg.ColocatedBaseTest"/>
    <param name="NbDest" value="100"/>
    <param name="NbMsg" value="10"/>
    <param name="MsgSize" value="5"/>
  </antcall>
</target>
<target name="noreg.test7_2" depends="init">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test7"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value="-DDestination=${Destination} -DBaseClass=${BaseClass} -DNbDest=${NbDest} -DNbMsg=${NbMsg} -DMsgSize=${MsgSize}"/>
  </antcall>
</target>

<target name="noreg.test8" description=" --> check server start and stop">
  <antcall target="test.start" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="className" value="noreg.Test8"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
    <param name="args" value=""/>
  </antcall>
</target>

<target name="noreg.test9" description=" --> check message ID and system property">
  <antcall target="test.start" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="className" value="noreg.Test9"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value="-DBaseClass=noreg.ColocatedBaseTest -DNbRound=10"/>
  </antcall>
</target>

<target name="noreg.test10" depends="test10a.noreg,test10b.noreg" description=" --> test selector with option : tcp or local"/>
<target name="test10a.noreg" depends="init">
  <antcall target="test.start" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="className" value="noreg.Test10"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value="-DBaseClass=noreg.TcpBaseTest -DNbRound=10"/>
  </antcall>
</target>
<target name="test10b.noreg" depends="init">
  <antcall target="test.start" inheritAll="true">
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="className" value="noreg.Test10"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value="-DBaseClass=noreg.ColocatedBaseTest -DNbRound=10"/>
  </antcall>
</target>

<target name="noreg.test11" depends="test11a.noreg,test11b.noreg" description=" --> check send message on delete topic thrown an exception if there are one server launch" />

<target name="test11a.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test11"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>
<target name="test11b.noreg">   
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test11"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers3.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jvmargs" value="-Dsid=1"/>
  </antcall>
</target>

<target name="noreg.test12" depends="test12a.noreg,test12b.noreg" description=" --> check send message on delete queue thrown an exception if there are one server launch"/>

<target name="test12a.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test12"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>
<target name="test12b.noreg">   
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test12"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers3.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jvmargs" value="-Dsid=1"/>
  </antcall>
</target>

<target name="noreg.test13" description=" --> check use timeout to receive when there are no message not fail">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test13"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>


<target name="noreg.test14" description=" --> check selector with topic">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test14"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test15" depends="test15-1.noreg,test15-2.noreg,test15-3.noreg,test15-4.noreg" description=" --> test close  and start consumer cnx during producer send. option : queue or topic and  Tcp or local " />

<target name="test15-1.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test15"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=noreg.TcpBaseTest"/>
  </antcall>
</target>
<target name="test15-2.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test15"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=noreg.TcpBaseTest"/>
  </antcall>
</target>
<target name="test15-3.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test15"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=noreg.ColocatedBaseTest"/>
  </antcall>
</target>
<target name="test15-4.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test15"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=noreg.ColocatedBaseTest"/>
  </antcall>
</target>

<target name="noreg.test16" depends="test16-1.noreg,test16-2.noreg,test16-3.noreg,test16-4.noreg"  description=" --> test close during receive and start consumer cnx during producer send. option : queue or topic and  Tcp or local "/>

<target name="test16-1.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test16"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=noreg.TcpBaseTest"/>
  </antcall>
</target>
<target name="test16-2.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test16"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=noreg.TcpBaseTest"/>
  </antcall>
</target>
<target name="test16-3.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test16"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=noreg.ColocatedBaseTest"/>
  </antcall>
</target>
<target name="test16-4.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test16"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=noreg.ColocatedBaseTest"/>
  </antcall>
</target>

<target name="noreg.test17" depends="test17-1.noreg,test17-2.noreg,test17-3.noreg,test17-4.noreg" description=" --> test close and start consumer cnx during producer send. option : queue or topic and  Tcp or local " />

<target name="test17-1.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test17"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=noreg.TcpBaseTest"/> 
  </antcall>
</target>
<target name="test17-2.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test17"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=noreg.TcpBaseTest"/>
  </antcall>
</target>
<target name="test17-3.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test17"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=noreg.ColocatedBaseTest"/>
  </antcall>
</target>
<target name="test17-4.noreg">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test17"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=noreg.ColocatedBaseTest"/>
  </antcall>
</target>



<target name="noreg.test19" description=" --> test delete temptopic on onMessage()">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test19"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-Dsid=0"/>
  </antcall>
</target>

<target name="noreg.test20" description=" --> check message send to DMQ when ttl expire">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test20"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-Dsid=0"/>
  </antcall>
</target>

<target name="noreg.test21" description=" --> check when message sent to a DMQ">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test21"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value="-Dsid=0"/>
  </antcall>
</target>

<target name="noreg.test24" description=" --> Test closure of connection on stop server">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test24"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test25" description=" --> Test closure of connection on stop server with cnxPendingTimer and connectingTimer ">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test25"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test31" description=" --> check use TTL ">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test31"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test32" description=" --> test create queue">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test32"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test35" description=" --> test getadminname">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test35"/>
    <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>


<target name="noreg.test39" description=" --> test rollback with queue. message is redelivred">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test39"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test40" description=" --> test messagelistener with rollback. message is redelivred"  >
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test40"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test41"  description=" --> test messagelistener with RuntimeException. message is redelivred"  >
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test41"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>
<target name="noreg.test45" description=" --> test TTL. With a topic and durable subscrber">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test45"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers3.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test46" description=" --> test threshold parameter and test DMQ with message more and more big">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test46"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers3.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test48" description=" --> test queue.clear() , restart of server, and check there is no message">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test48"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test49" description=" --> test queue.deleteMessage() , restart of server, and check there is no message">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test49"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test50" description=" --> test user.clearSubscription(), restart of server, and check there is no message">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test50"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test51" description=" --> test user.deleteMessage(), restart of server, and check there is no message">
   <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test51"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="noreg.test56" description=" --> test createQueue method">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="noreg.Test56"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="noreg/jndi.properties"/>
    <param name="a3conf" value="noreg/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<!-- end noreg -->

<!-- test with bug -->

<target name="withbug.test1" description=" --> bug">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="withbug.Test1"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="withbug/jndi.properties"/>
    <param name="a3conf" value="withbug/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="withbug.test2" description=" --> bug">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="withbug.Test2"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="withbug/jndi.properties"/>
    <param name="a3conf" value="withbug/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<!-- end test with bug -->



<!-- test xa -->
<target name="xa.test1" description=" --> Basic functioning of XA">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="xa.Test1"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="xa/jndi.properties"/>
    <param name="a3conf" value="xa/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="xa.test2" description=" --> test commit">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="xa.Test2"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="xa/jndi.properties"/>
    <param name="a3conf" value="xa/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="xa.test3" description=" --> test rollback : on send and on receive">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="xa.Test3"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="xa/jndi.properties"/>
    <param name="a3conf" value="xa/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<target name="xa.test4" description=" --> test recover : on send and on receive">
  <antcall target="test.start" inheritAll="true">
    <param name="className" value="xa.Test4"/>
    <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <param name="jndiconf" value="xa/jndi.properties"/>
    <param name="a3conf" value="xa/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
  </antcall>
</target>

<!-- end test xa -->
<!-- jndi2 test -->

<target name="init.test.jndi2" depends="init">
  <delete dir="${test.dir}"/>
  <mkdir dir="${test.dir}"/>
  <copy file="a3config.dtd" todir="${test.dir}"/>
  <copy file="jndi2/a3servers.xml" tofile="${test.dir}/a3servers.xml"/>
  <copy file="jndi2/a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>
</target>
<target name="init.test.jndi2.distributed" depends="init">
  <delete dir="${test.dir}"/>
  <mkdir dir="${test.dir}"/>
  <copy file="a3config.dtd" todir="${test.dir}"/>
  <copy file="jndi2/distributed/a3servers.xml" tofile="${test.dir}/a3servers.xml"/>
  <copy file="jndi2/a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>
</target>

<target name="client.start">
  <java classname="${className}" failonerror="no" fork="yes" dir="${test.dir}">
    <classpath path="${project.class.path}"/>
    <jvmarg value="-Dframework.TestCase.TestId=0"/>
    <jvmarg value="-Dframework.TestCase.OutFile=${report.file}"/>
  </java>
</target>

<target name="jndi.test1" depends="init.test.jndi2,compile" description=" --> test bind and unbind">
  <antcall target="client.start" inheritAll="true">
    <param name="className" value="jndi2.Test1"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
  </antcall>
</target>

<target name="jndi.test2" depends="init.test.jndi2,compile" description=" --> check exception when bind without create subcontext">
  <antcall target="client.start" inheritAll="true">
    <param name="className" value="jndi2.Test2"/>
    <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
  </antcall>
</target>
       
<target name="tests.dtb" depends="test.dtb,test.dtb2,test.dtb3,test.dtb4,test.dtb5,test.dtb.crash"/>

<target name="test.dtb" depends="compile" description=" --> Test using createSubcontext">
  <antcall target="init.test.jndi2.distributed" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="jndi2.distributed.JndiTest"/>
  </antcall>
</target>

<target name="test.dtb2" depends="compile" description=" --> Test createSubcontext method with multiple server">
  <antcall target="init.test.jndi2.distributed" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="jndi2.distributed.JndiTest2"/>
  </antcall>
</target>

<target name="test.dtb3" depends="compile" description=" --> check create invalid subcontext throw a NameNotFoundException">
  <antcall target="init.test.jndi2.distributed" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="jndi2.distributed.JndiTest3"/>
  </antcall>
</target>

<target name="test.dtb4" depends="compile" description=" --> Test lookup after restart server">
  <antcall target="init.test.jndi2.distributed" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="jndi2.distributed.JndiTest4"/>
  </antcall>
</target>

<target name="test.dtb5" depends="compile" description=" --> Test suggested by Nigel Rantor">
  <antcall target="init.test.jndi2.distributed" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="jndi2.distributed.JndiTest5"/>
  </antcall>
</target>
  
<target name="test.dtb.crash" depends="compile" description=" --> Check that the jndi still working after the recovery" >
  <antcall target="init.test.jndi2.distributed" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="jndi2.distributed.JndiCrashTest"/>
  </antcall>
</target>
<!-- end jndi2 test -->


<!-- start test jndi2 with loose coupling -->


<target name="init.test.nocoupling" depends="init">
  <delete dir="${test.dir}"/>
  <mkdir dir="${test.dir}"/>
  <copy file="a3config.dtd" todir="${test.dir}"/>
  <copy file="nocoupling/a3servers.xml" tofile="${test.dir}/a3servers.xml"/>
  <copy file="jndi2/a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>
</target>

<target name="nocoupling.test1" depends="compile" description=" --> Simple test : bind, rebind, createsubcontext, ... with 2 servers " >
  <antcall target="init.test.nocoupling" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="nocoupling.JndiTest1"/>
  </antcall>
</target>

<target name="nocoupling.test2" depends="compile" description=" --> test update jndi config when start a new server" >
  <antcall target="init.test.nocoupling" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="nocoupling.JndiTest2"/>
  </antcall>
</target>

<target name="nocoupling.test3" depends="compile" description=" --> test jndi config when start a slave server without master" > 
  <antcall target="init.test.nocoupling" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="nocoupling.JndiTest3"/>
  </antcall>
</target>

<target name="nocoupling.test4" depends="compile" description=" --> test jndi config when start a slave server without master" > 
  <antcall target="init.test.nocoupling" inheritAll="true"/>
  <antcall target="client.start" inheritAll="true">
    <param name="x" value="0"/>
    <param name="className" value="nocoupling.JndiTest4"/>
  </antcall>
</target>






<!-- end test jndi2 with loose coupling -->


<!-- start bridge test -->

<target name="bridge.test1" depends="init" description=" --> producer on foreign queue, consumer on bridge queue ">
  <parallel>
     <antcall target="test.start" inheritAll="true">
        <param name="className" value="bridge.BridgeTest"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
     </antcall>
     <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.Admin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
     </sequential>
  </parallel>
</target>

<target name="bridge.test2" depends="init" description=" --> publisher on foreign topic and subscriber on bridge topic">
   <parallel>
      <antcall target="test.start" inheritAll="true">
            <param name="className" value="bridge.BridgeTest2"/>
            <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
            <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
            <param name="jndiconf" value="bridge/jndi.properties"/>
            <param name="a3conf" value="bridge/a3servers.xml"/>
            <param name="jvmargs" value=""/>
      </antcall>
      <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.Admin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
      </sequential>
   </parallel>
</target>
<target name="bridge.test3" depends="init" description=" --> publisher on bridge topic and subscriber on foreign topic">
  <parallel>
    <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.BridgeTest3"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
   <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.Admin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
      </sequential>
  </parallel>
</target>

<target name="bridge.test4" depends="init" description=" --> producer on bridge queue ans consumer on foreign queue">
  <parallel>
    <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.BridgeTest4"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.Admin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>

<target name="bridge.test5" depends="init" description=" --> producer on bridge queue and subscriber on foreign topic">
  <parallel>
    <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.BridgeTest5"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.CrossAdmin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>

<target name="bridge.test6" depends="init" description=" --> publisher on bridge queue and consumer on  foreign queue">
  <parallel>
    <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.BridgeTest6"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.CrossAdmin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>




<target name="bridge.xatest1" depends="init" description=" --> producer on XA foreign queue and consumer on a bridge">
 <parallel>
   <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.XABridgeTest1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.XAAdmin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>

<target name="bridge.xatest2" depends="init" description=" --> publisher on XA foreign topic and subscriber on a bridge">
 <parallel>
   <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.XABridgeTest2"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.XAAdmin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>

<target name="bridge.xatest3" depends="init" description=" --> consumer on XA foreign queue and producer on bridge queue">
 <parallel>
   <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.XABridgeTest3"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.XAAdmin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>

<target name="bridge.xatest4" depends="init" description=" --> subscriber on XA foreign topic and publisher on bridge topic">
 <parallel>
   <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.XABridgeTest4"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.XAAdmin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>


<target name="bridge.xatest5" depends="init" description=" --> consumer on XA foreign queue and publisher on bridge topic">
 <parallel>
   <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.XABridgeTest5"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.CrossXAAdmin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>


<target name="bridge.xatest6" depends="init" description=" -->  subscriber on XA foreign topic and producer on bridge queue">
 <parallel>
   <antcall target="test.start" inheritAll="true">
      <param name="className" value="bridge.XABridgeTest6"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
    <sequential>
         <sleep seconds="8"/>
         <java classname="bridge.CrossXAAdmin" failonerror="no" fork="yes"
            dir="${test.dir}">
            <classpath path="${project.class.path}"/>
         </java>
    </sequential>
  </parallel>
</target>




<!-- end bridge test -->

<!-- start scheduler test -->
<target name="schedqueue.test1"  description=" --> send message specified schedulerdate : first in futur, second in pass">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="schedqueue.Test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="schedqueue/jndi.properties"/>
      <param name="a3conf" value="schedqueue/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>

<target name="schedqueue.test2"  description=" --> send two message, first with schedulerdate > of second message schedulerdate. check receive the second before the fisrt">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="schedqueue.Test2"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="schedqueue/jndi.properties"/>
      <param name="a3conf" value="schedqueue/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>



<!-- end scheduler test -->


<!-- test cluster -->
<target name="cluster.test1"  description=" -->  test topic cluster send and receive message">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="cluster.Test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>

<target name="cluster.testQ1"  description=" --> test simple cluster queue with producer on receiver on the same queue">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="cluster.TestQ1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>

<target name="cluster.testQ2"  description=" --> producer on queue 2, receiver on queue 0 and 1, check two receiver receive messaga">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="cluster.TestQ2"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>

<target name="cluster.testQ3"  description=" -->  fix big period and check no recieve any message ">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="cluster.TestQ3"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>

<target name="cluster.testQ4"  description=" --> check producThreshold property">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="cluster.TestQ4"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>


<target name="cluster.testQ5"  description=" --> check consumThreshold property ">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="cluster.TestQ5"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>
<!-- end test cluster -->

<!--  test hierarchical -->

<target name="hierarchical.test1"  description=" --> test hierarchical topic">
     <antcall target="test.start" inheritAll="true">
      <param name="className" value="hierarchical.Test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="hierarchical/jndi.properties"/>
      <param name="a3conf" value="hierarchical/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
</target>

<!-- end  test hierarchical -->


<!--  test ssl -->
<target name="sslinit" depends="init">
    <property name="keystore" location="${test.dir}/joram_ks"/>
    <property name="keystore_pass" value="jorampass"/>
  </target>

  <!-- Initializes the ssl centralized configuration -->
  <target name="sslsimple_init" depends="sslinit">
    <delete dir="${test.dir}"/>
    <mkdir dir="${test.dir}"/>
    <copy file="a3config.dtd" todir="${test.dir}"/>
    <copy file="a3debug.cfg" todir="${test.dir}"/>
    <copy file="ssl/jndi.properties"
          tofile="${test.dir}/jndi.properties"/>
    <copy file="ssl/a3servers.xml"
          tofile="${test.dir}/a3servers.xml"
          overwrite="true"/>
    <copy file="ssl/joram_ks" todir="${test.dir}"/>
  </target>

 
  <target name="ssl.test" depends="sslsimple_init,compile" description=" --> test with ssl conection">
 <java classname="ssl.Test" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
      <jvmarg line="-Dorg.objectweb.joram.keystore=${keystore} -Dorg.objectweb.joram.keystorepass=${keystore_pass} -Dframework.TestCase.OutFile=${report.file} "/>
    </java>
  </target>

<!-- end test ssl -->


<target name="jca.test" depends="jca_init" description=" --> test joram connector">
   <antcall target="test.run" inheritAll="true">
    <param name="className" value="connector.Connector"/>  
    <param name="jvmargs" value=""/>
     <param name="args" value=""/>
   </antcall>
</target>
 <target name="jca_init" depends="compile,init">
    <delete dir="${test.dir}"/>
    <mkdir dir="${test.dir}"/>
    <copy file="a3config.dtd" todir="${test.dir}"/>
    <copy file="a3debug.cfg" todir="${test.dir}"/>
    <copy file="connector/jndi.properties"
          tofile="${test.dir}/jndi.properties"/>
    <copy file="connector/a3servers.xml"
          tofile="${test.dir}/a3servers.xml"
      
    overwrite="true"/>
    <copy file="connector/joramAdmin.xml" todir="${test.dir}"/>
  </target>







<!--
 use for resolve probleme of with delete temp topic 

<target name="pb.temptopic" description=" ">
   <antcall target="test.start" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="pb.TempTopic"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="pb/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
   </antcall>
</target>



<target name="pb.Temp" description="  ">
  <antcall target="test.start" inheritAll="true">
    <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
    <param name="className" value="pb.Test_Temp_T"/>
    <param name="jndiconf" value="base/jndi.properties"/>
    <param name="a3conf" value="base/a3servers1.xml"/>
    <param name="jvmargs" value=""/>
    <param name="args" value=""/>
  </antcall>
</target>



   

use for resolve probleme of with HA Joram: mixing up the Topics


<target name="init.pb" depends="init,compile">
    <delete dir="${test.dir}"/>
    <mkdir dir="${test.dir}"/>
    <copy file="pb/a3servers.xml" tofile="${test.dir}/a3servers.xml"/>
    <copy file="pb/a3config.dtd" tofile="${test.dir}/a3config.dtd"/>
    <copy file="a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>
</target>

<target name="pb.test" depends="init"  description="  test 1.">
   <java classname="pb.HaTestPb" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
    </java>
</target>

<target name="pb.server1" depends="init"  description="  server 1.">
   <java classname="pb.Server1" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
    </java>
</target>

<target name="pb.server2" depends="init"  description="  server 2.">
   <java classname="pb.Server2" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
    </java>
</target>

<target name="pb.server3" depends="init"  description=" server 3.">
   <java classname="pb.Server3" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
    </java>
</target>



<target name="testdmq.server"  depends="init" description=" server .">

    <mkdir dir="${test.dir}"/>
 <copy file="base/jndi.properties" tofile="${test.dir}/jndi.properties" />
   <java classname="testDmq.DMQEmbeddedServer" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
    </java>
</target>

<target name="testdmq.admin"  depends="init" description=" server .">
   <java classname="testDmq.DMQAdmin" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
    </java>
</target>

<target name="testdmq.client"  depends="init" description=" server .">
   <java classname="testDmq.DMQClient" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
    </java>
</target>

<target name="testdmq.browser"  depends="init" description=" server .">
   <java classname="testDmq.DMQBrowser" failonerror="no" fork="yes"
          dir="${test.dir}">
      <classpath path="${project.class.path}"/>
    </java>
</target>
-->
</project>
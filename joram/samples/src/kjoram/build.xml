<project default="compile" basedir=".">

  <!-- Initializes the environment paths and properties -->
  <target name="init">
    <!-- Gets the user defined properties from file -->
    <property file="../../src/build.properties"/>
    <!-- Initializes the directory structure properties -->
    <property name="src.dir" location="."/>
    <property name="obj.dir" location="../../classes"/>
    <property name="lib.dir" location="../../../lib"/>
    <!-- Project classpath needed for execution -->
    <path id="project.class.path">
      <pathelement path="${java.class.path}/"/>
      <fileset dir="${lib.dir}">
         <include name="*.jar"/>
      </fileset>
      <fileset dir="../../../lib">
         <include name="*.jar"/>
      </fileset>
      <pathelement path="${obj.dir}"/>
      <pathelement path="${obj.dir}"/>
      <pathelement path="${src.dir}/kjoram"/>
    </path>
    <property name="project.class.path" refid="project.class.path"/>
  </target>

  <!-- Cleans samples - deletes generated files -->
  <target name="clean" depends="init"
          description="--> delete generated files">
    <delete dir="${obj.dir}"/>
    <delete dir="${build.dir}"/>
  </target>

  <!-- Prepares the compilation phase -->
  <target name="prepare" depends="init">
    <delete quiet="true" dir="${obj.dir}"/>
    <delete quiet="true" dir="${run.dir}"/>
    <mkdir dir="${obj.dir}/kjoram"/>
  </target>

  <!-- Compiles -->
  <target name="compile" depends="prepare"
    description="--> Compile all the ksoap samples">
    <javac target="1.1"
           srcdir="${src.dir}"
           destdir="${obj.dir}/kjoram"
           debug="${debug}"
           deprecation="${deprecation}"
           optimize="${optimize}"
           nowarn="${nowarn}"
           verbose="${verbose}">
      <classpath refid="project.class.path"/>
      <include name="**/*.java"/>
    </javac>
  </target>
</project>

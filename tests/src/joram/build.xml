<?xml version="1.0"?>

<!DOCTYPE project [
    <!ENTITY common SYSTEM "../common.xml">
]>

<project default="tests.all" basedir=".">
  <!-- Includes generic stuff -->
  &common;

  <target name="init.src">
    <!-- Tests specific sources set -->
    <patternset id="specific">
      <include name="joram/**/*.java"/>
    </patternset>
  </target>

  <target name="tests.all"
           description=" --> launch all joram tests">
     <ant dir="." antfile="build.xml" target="tests.noperf.all"/>
     <ant dir="." antfile="build.xml" target="tests.ha"/>
     <ant dir="." antfile="build.xml" target="tests.perf"/>
   </target>
    
  <target name="tests.noperf.all"
          description=" --> launch all no perf joram tests">
    <ant dir="." antfile="build.xml" target="tests.messages"/>
    <ant dir="." antfile="build.xml" target="tests.property"/>
    <ant dir="." antfile="build.xml" target="tests.selector"/>
    <ant dir="." antfile="build.xml" target="tests.temporary"/>
    <ant dir="." antfile="build.xml" target="tests.ack"/>
    <ant dir="." antfile="build.xml" target="base.test_Brows_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_MsgList_T"/>
    <ant dir="." antfile="build.xml" target="base.test_Exp_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_Multi_Q"/>
    <ant dir="." antfile="build.xml" target="tests.transacted"/>
    <ant dir="." antfile="build.xml" target="tests.exceptionlistener"/>
    <ant dir="." antfile="build.xml" target="tests.recovery"/>
    <ant dir="." antfile="build.xml" target="tests.dist"/>
    <ant dir="." antfile="build.xml" target="tests.admin"/>
    <ant dir="." antfile="build.xml" target="tests.client"/>
    <ant dir="." antfile="build.xml" target="tests.local"/>
    <ant dir="." antfile="build.xml" target="tests.dursub"/>
    <ant dir="." antfile="build.xml" target="tests.tcp"/>
    <ant dir="." antfile="build.xml" target="tests.reconf"/>
    <ant dir="." antfile="build.xml" target="tests.noreg"/>
    <ant dir="." antfile="build.xml" target="tests.xa"/>
    <ant dir="." antfile="build.xml" target="tests.bridge"/>
    <ant dir="." antfile="build.xml" target="tests.schedqueue"/>
    <ant dir="." antfile="build.xml" target="tests.cluster"/>
    <ant dir="." antfile="build.xml" target="tests.hierarchical"/>
    <ant dir="." antfile="build.xml" target="tests.ssl"/>
    <ant dir="." antfile="build.xml" target="jca.test"/>
    <ant dir="." antfile="build.xml" target="tests.dmq"/>
    <ant dir="." antfile="build.xml" target="tests.ttl"/>
    <ant dir="." antfile="build.xml" target="tests.sub"/>
    <ant dir="." antfile="build.xml" target="tests.monitoring"/>
  </target>

  <target name="tests.messages"
          description=" --> launch all messages tests">
    <ant dir="." antfile="build.xml" target="base.test_Q_M"/>
    <ant dir="." antfile="build.xml" target="base.test_T_M"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MText"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MText"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MObj"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MObjNull"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MObjBA"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MObj"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MObjNull"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MObjBA"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MByte"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MByte"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MMap"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MMap"/>
    <ant dir="." antfile="build.xml" target="base.test_Q_MStream"/>
    <ant dir="." antfile="build.xml" target="base.test_T_MStream"/>
    <ant dir="." antfile="build.xml" target="base.test_DMQ_Body"/>
  </target>

  <target name="tests.property"
          description=" --> launch all properties tests">
    <ant dir="." antfile="build.xml" target="base.test_property_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_property_T"/>
  </target>

  <target name="tests.selector"
          description=" --> launch all selectors tests">
    <ant dir="." antfile="build.xml" target="base.test_Selector_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_Selector_T"/>
  </target>

  <target name="tests.temporary"
          description=" --> launch all temporary tests">
    <ant dir="." antfile="build.xml" target="base.test_Temp_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_Temp_T"/>
    <ant dir="." antfile="build.xml" target="base.test_Temp_T2"/>
  </target>

  <target name="tests.ack"
          description=" --> launch all acknowledge tests">
    <ant dir="." antfile="build.xml" target="base.test_CAck1_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_CAck1_T"/>
    <ant dir="." antfile="build.xml" target="base.test_CAck2_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_CAck2_T"/>
    <ant dir="." antfile="build.xml" target="base.test_CAck3_Q"/>
  </target>

  <target name="tests.transacted"
          description=" --> launch all transacted tests">
    <ant dir="." antfile="build.xml" target="base.test_Trans_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_Trans_T"/>
  </target>

  <target name="tests.exceptionlistener" 
description=" --> launch all exceptionlistener tests">
    <ant dir="." antfile="build.xml" target="base.test_ExcpList_Q"/>
    <ant dir="." antfile="build.xml" target="base.test_ExcpList_T"/>
  </target>

  <target name="tests.ha"
          description=" --> launch all ha tests">
    <ant dir="." antfile="build.xml" target="ha.test1"/>
    <ant dir="." antfile="build.xml" target="ha.test2"/>
    <!-- ant dir="." antfile="build.xml" target="ha.test3"/ -->
    <ant dir="." antfile="build.xml" target="ha.test4-1"/>
    <ant dir="." antfile="build.xml" target="ha.test4-2"/>
    <ant dir="." antfile="build.xml" target="ha.test5-1"/>
    <ant dir="." antfile="build.xml" target="ha.test5-2"/>
    </target>

  <target name="tests.recovery"
          description=" --> launch all recovery tests">
    <ant dir="." antfile="build.xml" target="recovery.test1"/>
    <ant dir="." antfile="build.xml" target="recovery.test2"/>
    <ant dir="." antfile="build.xml" target="recovery.test3"/>
    <ant dir="." antfile="build.xml" target="recovery.test4"/>
    <ant dir="." antfile="build.xml" target="recovery.test5"/>
    <ant dir="." antfile="build.xml" target="recovery.test6"/>
    <ant dir="." antfile="build.xml" target="recovery.test7"/>
    <ant dir="." antfile="build.xml" target="recovery.test8"/>
    <ant dir="." antfile="build.xml" target="recovery.test9"/>
  </target>

  <target name="tests.dist"
          description=" --> launch all distributed tests">
    <ant dir="." antfile="build.xml" target="dist.test1"/>
    <ant dir="." antfile="build.xml" target="dist.test2"/>
    <ant dir="." antfile="build.xml" target="dist.test3"/>
    <ant dir="." antfile="build.xml" target="dist.test4"/>
  </target>

  <target name="tests.client"
          description=" --> launch all client tests">
    <ant dir="." antfile="build.xml" target="client.test8"/>
    <ant dir="." antfile="build.xml" target="client.test13"/>
    <ant dir="." antfile="build.xml" target="client.test18"/>
    <ant dir="." antfile="build.xml" target="client.topic"/>
    <ant dir="." antfile="build.xml" target="client.topic2"/>
    <ant dir="." antfile="build.xml" target="client.qrmax"/>
    <ant dir="." antfile="build.xml" target="client.mcun"/>
    <ant dir="." antfile="build.xml" target="client.close1"/>
    <ant dir="." antfile="build.xml" target="client.close2"/>
    <ant dir="." antfile="build.xml" target="client.close3"/>
    <ant dir="." antfile="build.xml" target="client.close4"/>
    <ant dir="." antfile="build.xml" target="client.rqueue"/>
    <ant dir="." antfile="build.xml" target="client.tmpq"/>
    <ant dir="." antfile="build.xml" target="client.recover"/>
    <ant dir="." antfile="build.xml" target="client.servexc"/>
    <ant dir="." antfile="build.xml" target="client.cnxclose"/>
    <ant dir="." antfile="build.xml" target="client.cnxclose1"/>
    <ant dir="." antfile="build.xml" target="client.cnxclose2"/>
    <ant dir="." antfile="build.xml" target="client.cnxclose3"/>
    <ant dir="." antfile="build.xml" target="client.empty"/>
    <ant dir="." antfile="build.xml" target="client.redelivery"/>
    <ant dir="." antfile="build.xml" target="client.rollback"/>
    <ant dir="." antfile="build.xml" target="client.nowait"/>
    <ant dir="." antfile="build.xml" target="client.cnxtime_1"/>
    <ant dir="." antfile="build.xml" target="client.cnxtime_2"/>
    <ant dir="." antfile="build.xml" target="client.noloss_1"/>
    <ant dir="." antfile="build.xml" target="client.noloss_2"/>
  </target>

  <target name="tests.connection"
          description=" --> launch all connection tests">
    <ant dir="." antfile="build.xml" target="connection.test1"/>
  </target>

  <target name="tests.local"
          description=" --> launch all local tests">
    <ant dir="." antfile="build.xml" target="local.test"/>
    <ant dir="." antfile="build.xml" target="local.test1"/>
    <ant dir="." antfile="build.xml" target="local.test2"/>
  </target>

  <target name="tests.dursub"
          description=" --> launch all dursub tests">
    <ant dir="." antfile="build.xml" target="dursub.test1"/>
    <ant dir="." antfile="build.xml" target="dursub.test2"/>
    <ant dir="." antfile="build.xml" target="dursub.test3"/>
    <ant dir="." antfile="build.xml" target="dursub.test4"/>
    <ant dir="." antfile="build.xml" target="dursub.unsub"/>
  </target>

  <target name="tests.tcp"
          description=" --> launch all tcp tests">
    <ant dir="." antfile="build.xml" target="tcp.test1"/>
    <ant dir="." antfile="build.xml" target="tcp.test2"/>
    <ant dir="." antfile="build.xml" target="tcp.test3"/>
    <ant dir="." antfile="build.xml" target="tcp.test4"/>
    <ant dir="." antfile="build.xml" target="tcp.test5"/>
  </target>

  <target name="tests.reconf"
          description=" --> launch all reconf tests">
    <ant dir="." antfile="build.xml" target="reconf.test-base"/>
    <ant dir="." antfile="build.xml" target="reconf.test"/>
    <ant dir="." antfile="build.xml" target="reconf.test2"/>
    <ant dir="." antfile="build.xml" target="reconf.test3"/>
  </target>

  <target name="tests.perf"
          description=" --> launch all perf tests">
    <ant dir="." antfile="build.xml" target="perf.test5"/>
    <ant dir="." antfile="build.xml" target="perf.test6"/>
    <ant dir="." antfile="build.xml" target="perf.test6M"/>
    <ant dir="." antfile="build.xml" target="perf.test26"/>
    <ant dir="." antfile="build.xml" target="perf.test27"/>
    <ant dir="." antfile="build.xml" target="perf.test28"/>
    <ant dir="." antfile="build.xml" target="perf.test29"/>
    <ant dir="." antfile="build.xml" target="perf.test30"/>
    <ant dir="." antfile="build.xml" target="perf.test33"/>
    <ant dir="." antfile="build.xml" target="perf.test34"/>
    <ant dir="." antfile="build.xml" target="perf.test47"/>
    <ant dir="." antfile="build.xml" target="perf.test54"/>
    <ant dir="." antfile="build.xml" target="perf.asynctest"/>
  </target>

  <target name="tests.noreg"
          description=" --> launch all noreg tests">
    <ant dir="." antfile="build.xml" target="noreg.test3"/>
    <ant dir="." antfile="build.xml" target="noreg.test4"/>
    <ant dir="." antfile="build.xml" target="noreg.test7.1"/>
    <ant dir="." antfile="build.xml" target="noreg.test7.2"/>
    <ant dir="." antfile="build.xml" target="noreg.test8"/>
    <ant dir="." antfile="build.xml" target="noreg.test9"/>
    <ant dir="." antfile="build.xml" target="noreg.test10"/>
    <ant dir="." antfile="build.xml" target="noreg.test11"/>
    <ant dir="." antfile="build.xml" target="noreg.test12"/>
    <ant dir="." antfile="build.xml" target="noreg.test13"/>
    <ant dir="." antfile="build.xml" target="noreg.test14"/>
    <ant dir="." antfile="build.xml" target="noreg.test15"/>
    <ant dir="." antfile="build.xml" target="noreg.test16"/>
    <ant dir="." antfile="build.xml" target="noreg.test17"/>
    <ant dir="." antfile="build.xml" target="noreg.test18"/>
    <ant dir="." antfile="build.xml" target="noreg.test19"/>
    <ant dir="." antfile="build.xml" target="noreg.test20"/>
    <ant dir="." antfile="build.xml" target="noreg.test21"/>
    <ant dir="." antfile="build.xml" target="noreg.test25"/>
    <ant dir="." antfile="build.xml" target="noreg.test31"/>
    <ant dir="." antfile="build.xml" target="noreg.test32"/>
    <ant dir="." antfile="build.xml" target="noreg.test35"/>
    <ant dir="." antfile="build.xml" target="noreg.test39"/>
    <ant dir="." antfile="build.xml" target="noreg.test40"/>
    <ant dir="." antfile="build.xml" target="noreg.test41"/>
    <ant dir="." antfile="build.xml" target="noreg.test45"/>
    <ant dir="." antfile="build.xml" target="noreg.test46"/>
    <ant dir="." antfile="build.xml" target="noreg.test48"/>
    <ant dir="." antfile="build.xml" target="noreg.test49"/>
    <ant dir="." antfile="build.xml" target="noreg.test50"/>
    <ant dir="." antfile="build.xml" target="noreg.test51"/>
    <ant dir="." antfile="build.xml" target="noreg.test56"/>
    <!-- ant dir="." antfile="build.xml" target="noreg.test57"/ -->
  </target>

  <target name="tests.xa"
          description=" --> launch all xa tests">
    <ant dir="." antfile="build.xml" target="xa.test1"/>
    <ant dir="." antfile="build.xml" target="xa.test2"/>
    <ant dir="." antfile="build.xml" target="xa.test3"/>
    <ant dir="." antfile="build.xml" target="xa.test4"/>
  </target>

  
  <target name="tests.bridge" description=" --> launch all bridge tests">
    <ant dir="." antfile="build.xml" target="bridge.test1"/>
    <ant dir="." antfile="build.xml" target="bridge.test1.1"/>
    <ant dir="." antfile="build.xml" target="bridge.test2"/>
    <ant dir="." antfile="build.xml" target="bridge.test2.1"/>
    <ant dir="." antfile="build.xml" target="bridge.test3"/>
    <ant dir="." antfile="build.xml" target="bridge.test3.1"/>
    <ant dir="." antfile="build.xml" target="bridge.test4"/>
    <ant dir="." antfile="build.xml" target="bridge.test5"/>
    <ant dir="." antfile="build.xml" target="bridge.test5.1"/>
    <ant dir="." antfile="build.xml" target="bridge.test6"/>
    <ant dir="." antfile="build.xml" target="bridge.test6.1"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest1"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest1.1"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest2"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest2.1"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest3"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest4"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest4.1"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest5"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest5.1"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest6"/>
    <ant dir="." antfile="build.xml" target="bridge.xatest6.1"/>
  </target>

  <target name="tests.schedqueue"
          description=" --> launch all schedqueue tests">
    <ant dir="." antfile="build.xml" target="schedqueue.test1"/>
    <ant dir="." antfile="build.xml" target="schedqueue.test2"/>
  </target>

  <target name="tests.cluster"
          description=" --> launch all cluster tests">
    <ant dir="." antfile="build.xml" target="cluster.test1"/>
    <ant dir="." antfile="build.xml" target="cluster.test2"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ1"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ2"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ3"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ4"/>
    <ant dir="." antfile="build.xml" target="cluster.testQ5"/>
  </target>

  <target name="tests.hierarchical"
          description=" --> launch all hierarchical tests">
    <ant dir="." antfile="build.xml" target="hierarchical.test1"/>
  </target>

  <target name="tests.ssl"
          description=" --> launch all ssl tests">
    <ant dir="." antfile="build.xml" target="ssl.test"/>
  </target>

  <target name="tests.dmq"
          description=" --> launch all dmq tests">
    <ant dir="." antfile="build.xml" target="dmq.TestDmq1"/>
    <ant dir="." antfile="build.xml" target="dmq.TestDmq2"/>
    <ant dir="." antfile="build.xml" target="dmq.TestDmq3"/>
    <ant dir="." antfile="build.xml" target="dmq.TestDmq4"/>
    <ant dir="." antfile="build.xml" target="dmq.TestDmq5"/>
    <ant dir="." antfile="build.xml" target="dmq.TestDmq6"/>
    <ant dir="." antfile="build.xml" target="dmq.ChainedDMQ"/>
  </target>

  <target name="tests.ttl"
          description=" --> launch all ttl tests">
    <ant dir="." antfile="build.xml" target="ttl.Test1_Topic"/>
    <ant dir="." antfile="build.xml" target="ttl.Test2_Queue"/>
  </target>

  <target name="tests.sub"
          description=" --> launch all sub tests">
    <ant dir="." antfile="build.xml" target="sub.Sub"/>
  </target>
  
  <target name="tests.monitoring"
          description=" --> launch all monitoring tests">
    <ant dir="." antfile="build.xml" target="monit.Test"/>
    <ant dir="." antfile="build.xml" target="monit.Test2"/>
  	<ant dir="." antfile="build.xml" target="monit.Test3"/>
  </target>

  <!--
    - Generic test launcher
    -->

  <target name="init.test">
    <!-- Initialization of the run directory -->
    <delete dir="${test.dir}"/>
    <mkdir dir="${test.dir}"/>

    <copy file="${a3conf}" tofile="${test.dir}/a3servers.xml"/>
    <replace file="${test.dir}/a3servers.xml"
             token="@engine@" value="${engine}"/>
    <replace file="${test.dir}/a3servers.xml"
             token="@transaction@" value="${transaction}"/>
    <replace file="${test.dir}/a3servers.xml"
             token="@network@" value="${network}"/>
    <replace file="${test.dir}/a3servers.xml"
             token="@multiCnxSync@" value="${multiCnx}"/>

    <copy file="a3debug.cfg" tofile="${test.dir}/a3debug.cfg"/>

    <available file="${joramAdmin}" type="file" 
               property="joramAdmin.available"/>
    <antcall target="cpJoramAdmin" inheritAll="true"/>

    <available file="${jndiconf}" type="file"
               property="jndi.available"/>
    <antcall target="cpJndi" inheritAll="true"/>
  </target>

  <target name="cpJoramAdmin" if="joramAdmin.available">
    <copy file="${joramAdmin}" tofile="${test.dir}/joramAdmin.xml"/>
  </target>

  <target name="cpJndi" if="jndi.available">
    <copy file="${jndiconf}" tofile="${test.dir}/jndi.properties"/>
  </target>

  <target name="init.a3props">
    <!-- Theses default properties can be overidden by param defines
      -  in specific target.
     -->
    <property name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <property name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
    <property name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
  </target>

  <target name="test.start">
    <!-- Launch test without initialization -->
    <java classname="${className}" failonerror="no" fork="yes" maxmemory="256m" dir="${test.dir}">
      <classpath path="${project.class.path}"/>
      <jvmarg line="-Dcom.sun.management.jmxremote -DMXServer=com.scalagent.jmx.JMXServer -Dframework.TestCase.TestId=${testid} -Dframework.TestCase.OutFile=${report.file} ${jvmargs}"/>
      <!-- jvmarg line="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y"/ -->
      <arg line="${arg}"/>
    </java>
  </target>

  <target name="test.run">
    <!-- Launch test with initialization: init.test + test.start -->
    <antcall target="init.test" inheritAll="true"/>
    <antcall target="test.start" inheritAll="true"/>
  </target>

  <!--  ************ init and start end *************** -->

  <target name="base.test_Q_M" depends="init.a3props,compile"
          description=" --> test if the message receive is the same that the message sent, with queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Q_M"/>
      <param name="className" value="joram.base.Test_Q_M"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_T_M" depends="init.a3props,compile"
          description=" --> test if the message receive is the same that the message sent, with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_T_M"/>
      <param name="className" value="joram.base.Test_T_M"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_Q_MText" depends="init.a3props,compile"
          description=" --> test if the text message receive is the same that the message sent, with queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Q_MText"/>
      <param name="className" value="joram.base.Test_Q_MText"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_T_MText" depends="init.a3props,compile"
          description=" --> test if the text message receive is the same that the message sent, with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_T_MText"/>
      <param name="className" value="joram.base.Test_T_MText"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
	
  <target name="base.test_Q_MObj" depends="init.a3props,compile"
          description=" --> test if the object message receive is the same that the message sent (use a String), with queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Q_MObj"/>
      <param name="className" value="joram.base.Test_Q_MObj"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_Q_MObjNull" depends="init.a3props,compile"
          description=" --> test if the object message receive is the same that the message sent (use a null object), with queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Q_MObjNull"/>
      <param name="className" value="joram.base.Test_Q_MObjNull"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_Q_MObjBA" depends="init.a3props,compile"
          description=" --> test if the object message receive is the same that the message sent (use a byte[]), with queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Q_MObjBA"/>
      <param name="className" value="joram.base.Test_Q_MObjBA"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_T_MObj" depends="init.a3props,compile"
          description=" --> test if the object message receive is the same that the message sent (use a String), with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_T_MObj"/>
      <param name="className" value="joram.base.Test_T_MObj"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_T_MObjNull" depends="init.a3props,compile"
          description=" --> test if the object message receive is the same that the message sent (use a null object), with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_T_MObjNull"/>
      <param name="className" value="joram.base.Test_T_MObjNull"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_T_MObjBA" depends="init.a3props,compile"
          description=" --> test if the object message receive is the same that the message sent (use a byte[]), with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_T_MObjBA"/>
      <param name="className" value="joram.base.Test_T_MObjBA"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_Q_MByte" depends="init.a3props,compile"
          description=" --> test if the byte message receive is the same that the message sent, with queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Q_MByte"/>
      <param name="className" value="joram.base.Test_Q_MByte"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_T_MByte" depends="init.a3props,compile"
          description=" --> test if the byte message receive is the same that the message sent, with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_T_MByte"/>
      <param name="className" value="joram.base.Test_T_MByte"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Q_MMap" depends="init.a3props,compile"
          description=" --> test if the Map message receive is the same that the message sent, with queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Q_MMap"/>
      <param name="className" value="joram.base.Test_Q_MMap"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_T_MMap" depends="init.a3props,compile"
          description=" --> test if the Map message receive is the same that the message sent, with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_T_MMap"/>
      <param name="className" value="joram.base.Test_T_MMap"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Q_MStream" depends="init.a3props,compile"
          description=" --> test if the Stream message receive is the same that the message sent, with queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Q_MStream"/>
      <param name="className" value="joram.base.Test_Q_MStream"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_T_MStream" depends="init.a3props,compile"
          description=" --> test if the Stream message receive is the same that the message sent, with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_T_MStream"/>
      <param name="className" value="joram.base.Test_T_MStream"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_property_Q" depends="init.a3props,compile"
          description=" --> test if the message properties are transmit with a queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_property_Q"/>
      <param name="className" value="joram.base.Test_property_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_property_T" depends="init.a3props,compile"
          description=" --> test if the message properties are transmit with a topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_property_T"/>
      <param name="className" value="joram.base.Test_property_T"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Selector_Q" depends="init.a3props,compile"
          description=" --> test the message selector with a queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Selector_Q"/>
      <param name="className" value="joram.base.Test_Selector_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Selector_T" depends="init.a3props,compile"
          description=" --> test the message selector with a topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Selector_T"/>
      <param name="className" value="joram.base.Test_Selector_T"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Temp_Q" depends="init.a3props,compile"
          description=" --> test the functioning of Temporary Queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Temp_Q"/>
      <param name="className" value="joram.base.Test_Temp_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Temp_T" depends="init.a3props,compile"
          description=" --> test the functioning of Temporary Topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Temp_T"/>
      <param name="className" value="joram.base.Test_Temp_T"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Temp_T2" depends="init.a3props,compile"
          description=" --> tests delete temporay topic when connection close">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Temp_T2"/>
      <param name="className" value="joram.base.Test_Temp_T2"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Brows_Q" depends="init.a3props,compile"
          description=" --> test the functioning of browser with Queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Brows_Q"/>
      <param name="className" value="joram.base.Test_Brows_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>


  <target name="base.test_MsgList_T" depends="init.a3props,compile"
          description=" --> test the functioning of message listener">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_MsgList_T"/>
      <param name="className" value="joram.base.Test_MsgList_T"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_Exp_Q" depends="init.a3props,compile"
          description=" --> test the message expiration with a queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Exp_Q"/>
      <param name="className" value="joram.base.Test_Exp_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_DMQ_Body" depends="init.a3props,compile"
          description=" --> test that a message body is not delete on a Dqueue when restart server">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_DMQ_Body"/>
      <param name="className" value="joram.base.Test_DMQ_Body"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_CAck1_Q" depends="init.a3props,compile"
          description=" --> test client_acknowledgement with one message and  with a queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_CAck1_Q"/>
      <param name="className" value="joram.base.Test_CAck1_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_CAck1_T" depends="init.a3props,compile"
          description=" --> test client_acknowledgement with one message and  with a topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_CAck1_T"/>
      <param name="className" value="joram.base.Test_CAck1_T"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_CAck2_Q" depends="init.a3props,compile"
          description=" --> test client_acknowledgement with three messages, one acknowledgement and  with a queue.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_CAck2_Q"/>
      <param name="className" value="joram.base.Test_CAck2_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_CAck2_T" depends="init.a3props,compile"
          description=" --> test client_acknowledgement with three messages, one acknowledgement and with a topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_CAck2_T"/>
      <param name="className" value="joram.base.Test_CAck2_T"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_CAck3_Q" depends="init.a3props,compile"
          description=" --> test client_acknowledgement. The message is redelivred when a session is close not a consumer">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_CAck3_Q"/>
      <param name="className" value="joram.base.Test_CAck3_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_Trans_Q" depends="init.a3props,compile"
          description=" --> test transcated session method with a queue.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Trans_Q"/>
      <param name="className" value="joram.base.Test_Trans_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_Trans_T" depends="init.a3props,compile"
          description=" --> test transcated session method with a topic.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Trans_T"/>
      <param name="className" value="joram.base.Test_Trans_T"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_ExcpList_Q" depends="init.a3props,compile"
          description=" --> test ExceptionListener with a queue.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_ExcpList_Q"/>
      <param name="className" value="joram.base.Test_ExcpList_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="base.test_ExcpList_T" depends="init.a3props,compile"
          description=" --> test ExceptionListener with a topic.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_ExcpList_T"/>
      <param name="className" value="joram.base.Test_ExcpList_T"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="base.test_Multi_Q" depends="init.a3props,compile"
          description=" --> check send and receive message with 500 queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="base.test_Multi_Q"/>
      <param name="className" value="joram.base.Test_Multi_Q"/>
      <param name="jndiconf" value="base/jndi.properties"/>
      <param name="a3conf" value="base/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>
  <!-- end test base -->

  <!-- test ha -->
  <target name="ha.test1" depends="compile"
          description=" --> test ha with 2 active server.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest"/>
      <param name="testid" value="ha.test1"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test2" depends="compile"
          description=" --> test ha with 1 active server.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest2"/>
      <param name="testid" value="ha.test2"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test3" depends="compile"
          description=" --> test ha with important message load.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest3"/>
      <param name="testid" value="ha.test3"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test4-1" depends="compile"
          description=" --> test ha with a colocated client (Topic).">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest4"/>
      <param name="testid" value="ha.test4-1"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs"
             value="-DnbRound=250 -DmsgPerRound=50 -Dpause=500 -Dname=topic"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test4-2" depends="compile"
          description=" --> test ha with a colocated client (Queue).">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest4"/>
      <param name="testid" value="ha.test4-2"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs"
             value="-DnbRound=100 -DmsgPerRound=50 -Dpause=1000 -Dname=queue"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test4-1.long" depends="compile"
          description=" --> test ha with a colocated client.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest4"/>
      <param name="testid" value="ha.test4.long"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs"
             value="-DnbRound=1000 -DmsgPerRound=100 -Dpause=1000 -Dname=topic"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test4-2.long" depends="compile"
          description=" --> test ha with a colocated client.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest4"/>
      <param name="testid" value="ha.test4.long"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs"
             value="-DnbRound=1000 -DmsgPerRound=100 -Dpause=1000 -Dname=queue"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test5-1" depends="compile"
          description=" --> test ha with a TCP client.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest5"/>
      <param name="testid" value="ha.test5-1"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs"
             value="-DnbRound=250 -DmsgPerRound=50 -Dpause=500 -Dname=topic"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test5-2" depends="compile"
          description=" --> test ha with a TCP client.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest5"/>
      <param name="testid" value="ha.test5-2"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs"
             value="-DnbRound=100 -DmsgPerRound=50 -Dpause=1000 -Dname=queue"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test5-1.long" depends="compile"
          description=" --> test ha with a TCP client.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest5"/>
      <param name="testid" value="ha.test5.long"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs"
             value="-DnbRound=1000 -DmsgPerRound=100 -Dpause=1000 -Dname=topic"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ha.test5-2.long" depends="compile"
          description=" --> test ha with a TCP client.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.ha.HATest5"/>
      <param name="testid" value="ha.test5.long"/>
      <param name="jndiconf" value="ha/jndi.properties"/>
      <param name="a3conf" value="ha/a3servers.xml"/>
      <param name="jvmargs"
             value="-DnbRound=1000 -DmsgPerRound=100 -Dpause=1000 -Dname=queue"/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <!-- fin test ha -->

  <!-- test recovery -->
  <target name="recovery.test1" depends="compile"
          description=" --> test recovery with queue and kill servers after send message and before receive">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Recover_1"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="recovery.test2" depends="compile"
          description=" --> test recovery with queue and kill server before ack all messages">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Recover_2"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="recovery.test3" depends="compile"
          description=" --> test recovery with topic and kill servers after send message and before receive">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Recover_3"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="recovery.test4" depends="compile"
          description=" --> test recovery with topic and kill server before ack all messages">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Recover_4"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="recovery.test5" depends="compile"
          description=" --> Test recovery : kill server during receive">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.ReliableTest"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="recovery.test6" depends="init.a3props,compile"
          description=" --> test recovery with 2 server and a durablesubscriber.  ">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Test6"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers3.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="recovery.test7" depends="compile"
          description=" --> test recovery with 1 server and a durablesubscriber.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Test7"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="recovery.test8"
          description=" --> test the DMQ recovery">
    <ant dir="." antfile="build.xml" target="recovery.test8-1"/>
    <ant dir="." antfile="build.xml" target="recovery.test8-2"/>
    <ant dir="." antfile="build.xml" target="recovery.test8-3"/>
  </target>

  <target name="recovery.test8-1" depends="init.a3props,compile"
          description=" --> test  the DMQ recovery">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Test8"/>
      <param name="testid" value="recovery.test8-1"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers3.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="recovery.test8-2" depends="init.a3props,compile"
          description=" --> test the DMQ recovery. DMQ is on other server">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Test8_2"/>
      <param name="testid" value="recovery.test8-2"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers3.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="recovery.test8-3" depends="init.a3props,compile"
          description=" --> test the DMQ recovery">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Test8_3"/>
      <param name="testid" value="recovery.test8-3"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers3.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="recovery.test9">
    <ant dir="." antfile="build.xml" target="recovery.test9-1"/>
    <ant dir="." antfile="build.xml" target="recovery.test9-2"/>
  </target>

  <target name="recovery.test9-1" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Test9"/>
      <param name="testid" value="recovery.test9-1"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers4.xml"/>
      <param name="jvmargs" value="-DMsgSize=10240"/>
    </antcall>
  </target>

  <target name="recovery.test9-2" depends="init.a3props,compile"
          description=" --> test recovery with several big message">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.recovery.Test9_2"/>
      <param name="testid" value="recovery.test9-2"/>
      <param name="jndiconf" value="recovery/jndi.properties"/>
      <param name="a3conf" value="recovery/a3servers4.xml"/>
      <param name="jvmargs" value="-DMsgSize=10240"/>
    </antcall>
  </target>

  <!-- end test recovery -->

  <!-- test distributed -->

  <target name="dist.test1" depends="init.a3props,compile"
          description=" --> test distributed with 2 serveurs and queue">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.distrib.Distrib_2serv"/>
      <param name="jndiconf" value="distrib/jndi.properties"/>
      <param name="a3conf" value="distrib/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="dist.test2" depends="init.a3props,compile"
          description=" --> test distributed with 3 serveurs and queue">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.distrib.Distrib_3serv"/>
      <param name="jndiconf" value="distrib/jndi.properties"/>
      <param name="a3conf" value="distrib/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="dist.test3" depends="init.a3props,compile"
          description=" --> test distributed with 2 serveurs and topic">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.distrib.Distrib_2serv_T"/>
      <param name="jndiconf" value="distrib/jndi.properties"/>
      <param name="a3conf" value="distrib/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="dist.test4" depends="init.a3props,compile"
          description=" --> test distributed with 3 serveurs and topic">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.distrib.Distrib_3serv_T"/>
      <param name="jndiconf" value="distrib/jndi.properties"/>
      <param name="a3conf" value="distrib/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <!-- end test distributed -->

  <!-- test admin -->

  <target name="tests.admin" depends="admin.test1"/>

  <target name="admin.test1" depends="init.a3props,compile"
          description=" --> test admin configuration">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.admin.AdminTest1"/>
      <param name="testid" value="admin.test1"/>
      <param name="jndiconf" value="admin/jndi.properties"/>
      <param name="a3conf" value="admin/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <!-- fin test admin -->

  <!-- test client -->

  <target name="client.test8" depends="init.a3props,compile"
          description=" --> test delete temporary queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest8"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.test8"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.test13" depends="init.a3props,compile"
          description=" --> Reproduce bug in ClientSubscription">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest13"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.test13"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.test18" depends="init.a3props,compile"
          description=" --> Checks that a message listener can send messages ">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest18"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.test18"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.mcun" depends="init.a3props,compile"
          description=" --> concurrent close consumer and a consumer listener">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.MsgConsUnsubscribe"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.mcun"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.topic" depends="init.a3props,compile"
          description=" --> send 100000 messages ans receive it,  test memory leak">
    <antcall target="init.test" inheritAll="true">
        <param name="a3conf" value="client/a3servers.xml"/>
        <param name="jndiconf" value="client/jndi.properties"/>
    </antcall>

    <parallel>
      <antcall target="test.start" inheritAll="true">
        <param name="className" value="joram.client.TopicPublisher"/>
        <param name="jvmargs" value=""/>
        <param name="args" value=""/>
      </antcall>
      <antcall target="test.start" inheritAll="true">
        <param name="className" value="joram.client.TopicListener"/>
        <param name="jvmargs" value=""/>
        <param name="args" value=""/>
      </antcall>
    </parallel>
  </target>

  <target name="client.topic2" depends="init.a3props,compile"
          description=" --> send message during 60s and receive it with 2 consumer, test memory leak">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest23"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.topic2"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.qrmax" depends="init.a3props,compile"
          description=" --> configure queueMessageReadMax that the consumer receive more message with one request">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.QueueReadMaxTest"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.qrmax"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.close1" depends="init.a3props,compile"
          description=" --> test close connection">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ConnectionClose"/>
      <param name="testid" value="client.close1"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.close1"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.close4" depends="init.a3props,compile"
          description=" --> test close connection with a exceptionlistener">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ConnectionClose4"/>
      <param name="testid" value="client.close4"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.close4"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.close3" depends="init.a3props,compile"
          description=" --> producer send messages when kill server.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ConnectionClose3"/>
      <param name="testid" value="client.close3"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.close3"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.close2" depends="init.a3props,compile"
          description=" --> producer send messages when close the session.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ConnectionClose2"/>
      <param name="testid" value="client.close2"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.close2"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.test5" depends="init.a3props,compile"
          description=" --> three tests, an anticipated connection, connection stop,  connection close  .">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest"/>
      <param name="testid" value="client.test5"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.test5"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.rqueue" depends="init.a3props,compile"
          description=" --> closing a message consumer or connection must clean the receive requests from the queue.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest10"/>
      <param name="testid" value="client.rqueue"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.rqueue"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.tmpq" depends="init.a3props,compile"
          description=" --> To close a tmpQueue, close consumer attach. There is exception when send to invalid queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest6"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.tmpq"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.recover" depends="init.a3props,compile"
          description=" --> Session recover from a message listener.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest5"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.recover"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.servexc" depends="init.a3props,compile"
          description=" --> kill a server and try to receive, there is a exception">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest4"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.servexc"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.cnxclose1" depends="init.a3props,compile"
          description=" --> try to receive when closing connection">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest3"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.cnxclose1"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.cnxclose3" depends="init.a3props,compile"
          description=" --> try to receive 1)when closing connection, 2)when closing a session, 3) when closing consumer">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest2"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.cnxclose3"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.cnxclose2" depends="init.a3props,compile"
          description=" --> try to receive 1)when closing consumer, 2)when closing a session">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest19"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.cnxclose2"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.cnxclose" depends="init.a3props,compile"
          description=" --> Test connection closure diagnostic.">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest22"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
      <param name="testid" value="client.cnxclose"/>
    </antcall>
  </target>

  <target name="client.empty" depends="init.a3props,compile"
          description=" --> Check that sending an empty ObjectMessage leads to receiving an ObjectMessage">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest24"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.empty"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.redelivery" depends="init.a3props,compile"
          description=" --> when a consumer abord receive, the message receive is redelivred">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest21"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.redelivery"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.rollback" depends="init.a3props,compile"
          description=" --> test rollback : 1) when closing consumer, 2) when closing session, 3) when closing connection">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest20"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.rollback"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.nowait" depends="init.a3props,compile"
          description=" --> receiveNoWait must return null if the connection is not started">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest17"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="client.nowait"/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.cnxtime_1" depends="init.a3props,compile"
          description=" --> when kill client with connectingtimer, context is destroy after connectingtimer">
    <antcall target="init.test" inheritAll="true">
        <param name="a3conf" value="client/a3servers.xml"/>
    </antcall>

    <parallel>
      <java classname="fr.dyade.aaa.agent.AgentServer" failonerror="no" fork="yes" dir="${test.dir}">
        <classpath path="${project.class.path}"/>
        <jvmarg line="-Dcom.sun.management.jmxremote -DMXServer=com.scalagent.jmx.JMXServer"/>
        <!-- jvmarg line="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y"/ -->
        <arg line="0 ./s0"/>
      </java>

      <sequential>
        <sleep seconds="1"/>
        <antcall target="test.start" inheritAll="true">
          <param name="className" value="joram.client.ClientTest16"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
        <sleep seconds="10"/>
        <antcall target="test.start" inheritAll="true">
          <param name="className" value="joram.client.ClientTest16_2"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
      </sequential>
    </parallel>
  </target>

  <target name="client.cnxtime_2" depends="init.a3props,compile"
          description=" --> when kill client with connectingtimer, context is not destroy before connectingtimer">
    <antcall target="init.test" inheritAll="true">
        <param name="a3conf" value="client/a3servers.xml"/>
    </antcall>

    <parallel>
      <java classname="fr.dyade.aaa.agent.AgentServer" failonerror="no" fork="yes" dir="${test.dir}">
        <classpath path="${project.class.path}"/>
        <jvmarg line="-Dcom.sun.management.jmxremote -DMXServer=com.scalagent.jmx.JMXServer"/>
        <!-- jvmarg line="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y"/ -->
        <arg line="0 ./s0"/>
      </java>

      <sequential>
        <sleep seconds="1"/>
        <antcall target="test.start" inheritAll="true">
          <param name="className" value="joram.client.ClientTest16"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
        <sleep seconds="2"/>
        <antcall target="test.start" inheritAll="true">
          <param name="className" value="joram.client.ClientTest16_2"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
      </sequential>
    </parallel>
  </target>

  <target name="client.noloss_1" depends="init.a3props,compile"
          description=" --> Check that there are no messages loss during closure of session ">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest12"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="client.noloss_2" depends="init.a3props,compile"
          description=" --> Check that there are no messages loss during an asynchrnous close of session ">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.client.ClientTest11"/>
      <param name="jndiconf" value="client/jndi.properties"/>
      <param name="a3conf" value="client/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <!-- fin test client -->

	<!-- connection tests -->
  <target name="connection.test1" depends="connection.test1.1,connection.test1.2"/>
	
  <target name="connection.test1.1" depends="init.a3props,compile"
          description=" --> Test connection close with a colocalised server">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.connection.Test1"/>
      <param name="jndiconf" value="connection/jndi.properties"/>
      <param name="a3conf" value="connection/a3servers.xml"/>
      <param name="jvmargs" value="-DBaseClass=joram.connection.ColocatedBaseTest"/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="connection.test1.2" depends="init.a3props,compile"
          description=" --> Test connection close with a remote server">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.connection.Test1"/>
      <param name="jndiconf" value="connection/jndi.properties"/>
      <param name="a3conf" value="connection/a3servers.xml"/>
      <param name="jvmargs" value="-DBaseClass=joram.connection.TcpBaseTest"/>
      <param name="args" value=""/>
    </antcall>
  </target>
	
	<!-- end connection tests -->

  	<!-- local test -->

  <target name="local.test" depends="init.a3props,compile"
          description=" --> Test messages transmission with a local configuration">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.local.LocalTest"/>
      <param name="jndiconf" value="local/jndi.properties"/>
      <param name="a3conf" value="local/a3servers.xml"/>
      <param name="testid" value="local.test"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="local.test1" depends="init.a3props,compile"
          description=" --> tests the local replies mechanism">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.local.CommitTest"/>
      <param name="jndiconf" value="local/jndi.properties"/>
      <param name="a3conf" value="local/a3servers.xml"/>
      <param name="testid" value="local.test1"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="local.test2" depends="init.a3props,compile"
          description=" --> test local connection without sever init and with server init">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.local.Test2"/>
      <param name="jndiconf" value="local/jndi.properties"/>
      <param name="a3conf" value="local/a3servers1.xml"/>
      <param name="testid" value="local.test2"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <!-- end local test -->

  <!-- durablesubsciber test -->

  <target name="dursub.test1" depends="init.a3props,compile"
          description=" --> test about creation of durable subscriber">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.dursub.Test1"/>
      <param name="jndiconf" value="dursub/jndi.properties"/>
      <param name="a3conf" value="dursub/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="dursub.test2" depends="init.a3props,compile"
          description=" --> test receive message, after kill and restart durablesubscriber">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.dursub.Dursub_1"/>
      <param name="jndiconf" value="dursub/jndi.properties"/>
      <param name="a3conf" value="dursub/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="dursub.test3" depends="init.a3props,compile"
          description=" --> Check that two durable subscriptions do not interfere when consuming their messages">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.dursub.Dursub_2"/>
      <param name="jndiconf" value="dursub/jndi.properties"/>
      <param name="a3conf" value="dursub/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="dursub.test4" depends="init.a3props,compile"
          description=" --> test dursub when kill and restart a client">
    <antcall target="init.test" inheritAll="true">
        <param name="a3conf" value="dursub/a3servers1.xml"/>
    </antcall>

    <parallel>
      <java classname="fr.dyade.aaa.agent.AgentServer" failonerror="no" fork="yes" dir="${test.dir}">
        <classpath path="${project.class.path}"/>
        <jvmarg line="-Dcom.sun.management.jmxremote -DMXServer=com.scalagent.jmx.JMXServer"/>
        <!-- jvmarg line="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y"/ -->
        <arg line="0 ./s0"/>
      </java>

      <sequential>
        <sleep seconds="1"/>
        <antcall target="test.start" inheritAll="true">
          <param name="className" value="joram.dursub.DurTest2"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
        <sleep seconds="5"/>
        <antcall target="test.start" inheritAll="true">
          <param name="className" value="joram.dursub.DurTest2_2"/>
          <param name="jvmargs" value=""/>
          <param name="args" value=""/>
        </antcall>
      </sequential>
    </parallel>
  </target>

  <target name="dursub.unsub" depends="init.a3props,compile"
          description=" --> test unsubscribe with a null subscription name">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.dursub.Test2"/>
      <param name="jndiconf" value="dursub/jndi.properties"/>
      <param name="a3conf" value="dursub/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <!-- end durablesubsciber test -->

  <!-- test tcp -->

  <target name="tcp.test1" depends="init.a3props,compile"
          description=" --> Test messages transmission with a tcp configuration">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.tcp.Test"/>
      <param name="testid" value="tcp.test1"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="tcp.test2" depends="init.a3props,compile"
          description=" --> Test receive messge : Use 3 servers.1 for producer, 1 for consumer, 1 for queue and topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.tcp.Test2"/>
      <param name="testid" value="tcp.test2"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="tcp.test3" depends="init.a3props,compile"
          description=" --> test call of exception when recieve a message and when stop a server">
    <antcall target="test.run" inheritAll="true">
      <!-- Be careful ! Use NTransaction -->
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="className" value="joram.tcp.Test3"/>
      <param name="testid" value="tcp.test3"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="tcp.test4" depends="init.a3props,compile"
          description=" --> test call of exception when stop a server">
    <antcall target="test.run" inheritAll="true">
      <!-- Be careful ! Use NTransaction -->
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="className" value="joram.tcp.Test4"/>
      <param name="testid" value="tcp.test4"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="tcp.test5" depends="init.a3props,compile"
          description=" --> test call of exception when use a bad password">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="tcp.test5"/>
      <param name="className" value="joram.tcp.Test5"/>
      <param name="jndiconf" value="tcp/jndi.properties"/>
      <param name="a3conf" value="tcp/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <!-- end test tcp -->

  <!--  test reconf -->

  <target name="reconf.test-base" depends="init.a3props,compile"
          description=" --> test reconfiguration server">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.reconf.ReconfTestBase"/>
      <param name="jndiconf" value="reconf/jndi.properties"/>
      <param name="a3conf" value="reconf/a3servers.xml"/>
      <param name="args" value=""/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>
  
  <target name="reconf.test" depends="init.a3props,compile"
          description=" --> test reconfiguration server">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.reconf.ReconfTest"/>
      <param name="testid" value="reconf.test"/>
      <param name="jndiconf" value="reconf/jndi.properties"/>
      <param name="a3conf" value="reconf/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="reconf.test2" depends="init.a3props,compile"
          description=" --> test reconfiguration server with exception">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.reconf.ReconfTest2"/>
      <param name="testid" value="reconf.test1"/>
      <param name="jndiconf" value="reconf/jndi.properties"/>
      <param name="a3conf" value="reconf/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  
  <target name="reconf.test3" depends="init.a3props,compile"
          description=" --> test reconfiguration server">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.reconf.ReconfTest3"/>
      <param name="jndiconf" value="reconf/jndi.properties"/>
      <param name="a3conf" value="reconf/a3servers3.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <!-- end test reconf -->

  <!-- perf test -->

  <target name="perf.asynctest" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.AsyncTest"/>
      <param name="testid" value="perf.asynctest"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers.xml"/>
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="perf.test5"
          description=" --> test time between sender and receiver with queue or topic">
    <antcall target="perf.test5-1"/>
    <antcall target="perf.test5-2"/>
  </target>

  <target name="perf.test5-1" depends="init.a3props,compile"
          description=" --> test time between sender and receiver with queue or topic in NullTransaction">
    <antcall target="perf.test5-x" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="testid" value="perf.test5-1"/>
    </antcall>
  </target>

  <target name="perf.test5-2" depends="init.a3props,compile"
          description=" --> test time between sender and receiver with queue or topic in NTransaction">
    <antcall target="perf.test5-x" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="perf.test5-2"/>
    </antcall>
  </target>

  <target name="perf.test5-x"
          description=" --> test time between sender and receiver with queue or topic">
    <parallel>
      <antcall target="test.run" inheritAll="true">
        <param name="jndiconf" value="perfs/jndi.properties"/>
        <param name="a3conf" value="perfs/a3servers1.xml"/>
        <param name="className" value="joram.perfs.ServerTest5"/>

        <param name="jvmargs" value="-DNbClients=4"/>
      </antcall>

      <sequential>
        <sleep seconds="1"/>
        <parallel>
          <antcall target="test.start" inheritAll="true">
            <param name="className" value="joram.perfs.Test5"/>
            <param name="jvmargs" value="-Dhostname=localhost -DDestination=org.objectweb.joram.client.jms.Queue"/>
          </antcall>
          <antcall target="test.start" inheritAll="true">
            <param name="className" value="joram.perfs.Test5"/>
            <param name="jvmargs" value="-Dhostname=localhost -DDestination=org.objectweb.joram.client.jms.Topic"/>
          </antcall>
          <antcall target="test.start" inheritAll="true">
            <param name="className" value="joram.perfs.Test5"/>
            <param name="jvmargs" value="-Dhostname=localhost -DDestination=org.objectweb.joram.client.jms.Queue"/>
          </antcall>
          <antcall target="test.start" inheritAll="true">
            <param name="className" value="joram.perfs.Test5"/>
            <param name="jvmargs" value="-Dhostname=localhost -DDestination=org.objectweb.joram.client.jms.Topic"/>
          </antcall>
        </parallel>
      </sequential>
    </parallel>
  </target>

  <!-- Queue and topic statistics -->

  <target name="perf.test6"
          description=" --> statistics for queue and topic">
    <antcall target="perf.test6-1"/>
    <antcall target="perf.test6-2"/>
  </target>

  <!-- Queue statistics -->

  <target name="perf.test6-1" description=" --> queue statistics">
    <ant dir="." antfile="build.xml" target="perf.test6-1.1"/>
    <ant dir="." antfile="build.xml" target="perf.test6-1.2"/>
    <ant dir="." antfile="build.xml" target="perf.test6-1.3"/>
    <ant dir="." antfile="build.xml" target="perf.test6-1.4"/>
    <ant dir="." antfile="build.xml" target="perf.test6-1.5"/>
    <ant dir="." antfile="build.xml" target="perf.test6-1.6"/>
    <ant dir="." antfile="build.xml" target="perf.test6-1.7"/>
    <ant dir="." antfile="build.xml" target="perf.test6-1.8"/>
   </target>

  <target name="perf.test6-1.1"
          description=" --> queue statistics: transient=false, colocated=true, transacted=false">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-1.1"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="MsgTransient" value="false"/>
      <param name="Transacted" value="false"/>
    </antcall>
   </target>

  <target name="perf.test6-1.2"
          description=" --> queue statistics: transient=true, colocated=true, transacted=false">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-1.2"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="MsgTransient" value="true"/>
      <param name="Transacted" value="false"/>
    </antcall>
   </target>

  <target name="perf.test6-1.3"
          description=" --> queue statistics: transient=false, colocated=false, transacted=false">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-1.3"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="MsgTransient" value="false"/>
      <param name="Transacted" value="false"/>
    </antcall>
   </target>

  <target name="perf.test6-1.4"
          description=" --> queue statistics: transient=true, colocated=false, transacted=false">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-1.4"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="MsgTransient" value="true"/>
      <param name="Transacted" value="false"/>
    </antcall>
   </target>

  <target name="perf.test6-1.5"
          description=" --> queue statistics: transient=false, colocated=true, transacted=true">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-1.5"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="MsgTransient" value="false"/>
      <param name="Transacted" value="true"/>
    </antcall>
   </target>

  <target name="perf.test6-1.6"
          description=" --> queue statistics: transient=true, colocated=true, transacted=true">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-1.6"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="MsgTransient" value="true"/>
      <param name="Transacted" value="true"/>
    </antcall>
   </target>

  <target name="perf.test6-1.7"
          description=" --> queue statistics: transient=false, colocated=false, transacted=true">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-1.7"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="MsgTransient" value="false"/>
      <param name="Transacted" value="true"/>
    </antcall>
   </target>

  <target name="perf.test6-1.8"
          description=" --> queue statistics: transient=true, colocated=false, transacted=true">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-1.8"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="MsgTransient" value="true"/>
      <param name="Transacted" value="true"/>
    </antcall>
   </target>

  <!-- Topic statistics -->

  <target name="perf.test6-2" description=" --> topic statistics">
    <antcall target="perf.test6-2.1"/>
    <antcall target="perf.test6-2.2"/>
    <antcall target="perf.test6-2.3"/>
    <antcall target="perf.test6-2.4"/>
    <antcall target="perf.test6-2.5"/>
    <antcall target="perf.test6-2.6"/>
    <antcall target="perf.test6-2.7"/>
    <antcall target="perf.test6-2.8"/>
   </target>

  <target name="perf.test6-2.1"
          description=" --> topic statistics: transient=false, durable=true, colocated=true, transacted=false">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-2.1"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="MsgTransient" value="false"/>
      <param name="SubDurable" value="true"/>
      <param name="Transacted" value="false"/>
    </antcall>
   </target>

  <target name="perf.test6-2.2"
          description=" --> topic statistics: transient=true, durable=false, colocated=true, transacted=false">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-2.2"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="MsgTransient" value="true"/>
      <param name="SubDurable" value="false"/>
      <param name="Transacted" value="false"/>
    </antcall>
   </target>

  <target name="perf.test6-2.3"
          description=" --> topic statistics: transient=false, durable=true, colocated=false, transacted=false">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-2.3"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="MsgTransient" value="false"/>
      <param name="SubDurable" value="true"/>
      <param name="Transacted" value="false"/>
    </antcall>
   </target>

  <target name="perf.test6-2.4"
          description=" --> topic statistics: transient=true, durable=false, colocated=false, transacted=false">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-2.4"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="MsgTransient" value="true"/>
      <param name="SubDurable" value="false"/>
      <param name="Transacted" value="false"/>
    </antcall>
   </target>

  <target name="perf.test6-2.5"
          description=" --> topic statistics: transient=false, durable=true, colocated=true, transacted=true">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-2.5"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="MsgTransient" value="false"/>
      <param name="SubDurable" value="true"/>
      <param name="Transacted" value="true"/>
    </antcall>
   </target>

  <target name="perf.test6-2.6"
          description=" --> topic statistics: transient=true, durable=true, colocated=true, transacted=true">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-2.6"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="MsgTransient" value="true"/>
      <param name="SubDurable" value="false"/>
      <param name="Transacted" value="true"/>
    </antcall>
   </target>

  <target name="perf.test6-2.7"
          description=" --> topic statistics: transient=false, durable=true, colocated=false, transacted=true">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-2.7"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="MsgTransient" value="false"/>
      <param name="SubDurable" value="true"/>
      <param name="Transacted" value="true"/>
    </antcall>
   </target>

  <target name="perf.test6-2.8"
          description=" --> topic statistics: transient=true, durable=true, colocated=false, transacted=true">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-2.8"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="MsgTransient" value="true"/>
      <param name="SubDurable" value="false"/>
      <param name="Transacted" value="true"/>
    </antcall>
   </target>

  <!-- Configurable performance test -->
  <target name="perf.test6-3"
          description=" --> Configurable performance test">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="perf.test6-3"/>
      <!-- param name="Destination"
             value="org.objectweb.joram.client.jms.Topic"/ -->
      <param name="Destination"
             value="org.objectweb.joram.client.jms.Queue"/>
      <param name="transaction"
             value="fr.dyade.aaa.util.NTransaction"/>
      <!-- param name="transaction"
             value="fr.dyade.aaa.util.NullTransaction"/ -->
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <!-- param name="engine" value="fr.dyade.aaa.agent.GCEngine"/ -->
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <!-- param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/ -->
      <param name="dupsOk" value="true"/>
      <param name="queueMessageReadMax" value="100"/>
      <param name="topicAckBufferMax" value="50"/>
      <param name="implicitAck" value="true"/>
      <param name="MsgTransient" value="true"/>
      <param name="SubDurable" value="false"/>
      <param name="Transacted" value="false"/>
      <param name="NbRound" value="10000"/>
      <param name="NbMsgPerRound" value="100"/>
      <param name="NbProdCons" value="1"/>
      <param name="MsgSize" value="25"/>
    </antcall>
  </target>

  <!-- Generic launcher for performance tests  -->
  <target name="init.test6props">
    <property name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
    <property name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
    <property name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <property name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <property name="dupsOk" value="true"/>
    <property name="queueMessageReadMax" value="100"/>
    <property name="topicAckBufferMax" value="50"/>
    <property name="implicitAck" value="true"/>
    <property name="MsgTransient" value="false"/>
    <property name="SubDurable" value="false"/>
    <property name="Transacted" value="false"/>
    <property name="NbRound" value="100"/>
    <property name="NbMsgPerRound" value="100"/>
    <property name="NbProdCons" value="1"/>
    <property name="MsgSize" value="25"/>
  </target>

  <target name="perf.test6-x" depends="init.test6props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test6"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTLogFileSize=32 -DNTLogMemorySize=4096 -DDestination=${Destination} -DBaseClass=${BaseClass} -DdupsOk=${dupsOk} -DqueueMessageReadMax=${queueMessageReadMax} -DtopicAckBufferMax=${topicAckBufferMax} -DimplicitAck=${implicitAck} -DMsgTransient=${MsgTransient} -DSubDurable=${SubDurable} -DTransacted=${Transacted} -DNbRound=${NbRound} -DNbMsgPerRound=${NbMsgPerRound} -DNbSender=${NbProdCons} -DNbReceiver=${NbProdCons} -DNbDestination=${NbProdCons} -DMsgSize=${MsgSize}"/>
    </antcall>
  </target>

  <!-- YJP specific launcher for performance tests  -->
  <target name="test6-yjp.perf"
          description=" --> Configurable performance test">
    <antcall target="perf.test6-yjpx" inheritAll="true">
      <param name="testid" value="test6-yjp.perf"/>
      <param name="Destination"
             value="org.objectweb.joram.client.jms.Topic"/>
      <!-- param name="Destination"
             value="org.objectweb.joram.client.jms.Queue"/ -->
      <!-- param name="transaction"
             value="fr.dyade.aaa.util.NTransaction"/ -->
      <param name="transaction"
             value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <!-- param name="engine" value="fr.dyade.aaa.agent.GCEngine"/ -->
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <!-- param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/ -->
      <!-- param name="dupsOk" value="true"/ -->
      <!-- param name="queueMessageReadMax" value="100"/ -->
      <!-- param name="topicAckBufferMax" value="50"/ -->
      <!-- param name="implicitAck" value="true"/ -->
      <param name="MsgTransient" value="true"/>
      <param name="SubDurable" value="false"/>
      <param name="Transacted" value="false"/>
      <param name="NbRound" value="1000"/>
      <param name="NbMsgPerRound" value="100"/>
      <param name="NbProdCons" value="1"/>
      <param name="MsgSize" value="50"/>
    </antcall>
  </target>

	<target name="perf.test6-yjpx" depends="init.test6props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test6"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <!-- param name="jvmargs" value="-agentlib:yjpagent=onexit=memory,disablej2ee,noj2ee,tracing,alloc,dir=c:\MySnapshots"/ -->
      <param name="jvmargs" value="-agentlib:yjpagent=onexit=memory,disablej2ee,noj2ee,tracing,dir=c:\MySnapshots -DNTLogFileSize=32 -DNTLogMemorySize=4096 -DDestination=${Destination} -DBaseClass=${BaseClass} -DdupsOk=${dupsOk} -DqueueMessageReadMax=${queueMessageReadMax} -DtopicAckBufferMax=${topicAckBufferMax} -DimplicitAck=${implicitAck} -DMsgTransient=${MsgTransient} -DSubDurable=${SubDurable} -DTransacted=${Transacted} -DNbRound=${NbRound} -DNbMsgPerRound=${NbMsgPerRound} -DNbSender=${NbProdCons} -DNbReceiver=${NbProdCons} -DNbDestination=${NbProdCons} -DMsgSize=${MsgSize}"/>
    </antcall>
  </target>

  <!-- HPROF specific launcher for performance tests  -->

  <target name="test6-hp.perf" depends="compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test6"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-agentlib:hprof=cpu=samples -DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=joram.perfs.TcpBaseTest -DMsgTransient=false -DSubDurable=true -DTransacted=false -DNbSender=1 -DNbReceiver=1 -DNbDestination=1 -DNbRound=100 -DNbMsgPerRound=100 -DMsgSize=100000"/>
    </antcall>
  </target>

  <!-- Queue and topic statistics in multi-sender mode -->

  <target name="perf.test6M"
          description="Queue and topic statistics in multi-sender mode">
    <ant dir="." antfile="build.xml" target="perf.test6M-1"/>
    <ant dir="." antfile="build.xml" target="perf.test6M-2"/>
  </target>

  <!-- Queue statistics in multi-sender mode -->

  <target name="perf.test6M-1"
          description="Queue statistics in multi-sender mode">
    <ant dir="." antfile="build.xml" target="perf.test6M-1.1"/>
    <ant dir="." antfile="build.xml" target="perf.test6M-1.2"/>
  </target>

  <target name="perf.test6M-1.1">
    <antcall target="perf.test6M-x" inheritAll="true">
      <param name="testid" value="M-1.1"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="multiThreadSync" value="true"/>
    </antcall>
  </target>

  <target name="perf.test6M-1.2">
    <antcall target="perf.test6M-x" inheritAll="true">
      <param name="testid" value="M-1.2"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="multiThreadSync" value="true"/>
    </antcall>
  </target>

  <!-- Topic statistics in multi-sender mode -->

  <target name="perf.test6M-2"
          description="Topic statistics in multi-sender mode">
    <ant dir="." antfile="build.xml" target="perf.test6M-2.1"/>
    <ant dir="." antfile="build.xml" target="perf.test6M-2.2"/>
  </target>

  <target name="perf.test6M-2.1">
    <antcall target="perf.test6M-x" inheritAll="true">
      <param name="testid" value="M-2.1"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <param name="multiThreadSync" value="true"/>
    </antcall>
  </target>

  <target name="perf.test6M-2.2">
    <antcall target="perf.test6M-x" inheritAll="true">
      <param name="testid" value="M-2.2"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Topic"/>
      <param name="BaseClass" value="joram.perfs.TcpBaseTest"/>
      <param name="multiThreadSync" value="true"/>
    </antcall>
  </target>

  <!-- Configurable performance test -->

  <target name="perf.test6M-3"
          description=" --> Configurable performance test">
    <antcall target="perf.test6-x" inheritAll="true">
      <param name="testid" value="M-3"/>
      <param name="Destination"
             value="org.objectweb.joram.client.jms.Topic"/>
      <!-- param name="Destination"
             value="org.objectweb.joram.client.jms.Queue"/ -->
      <param name="transaction"
             value="fr.dyade.aaa.util.NTransaction"/>
      <!-- param name="transaction"
             value="fr.dyade.aaa.util.NullTransaction"/ -->
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <!-- param name="engine" value="fr.dyade.aaa.agent.GCEngine"/ -->
      <param name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
      <!-- param name="BaseClass" value="joram.perfs.TcpBaseTest"/ -->
      <param name="MsgTransient" value="true"/>
      <param name="SubDurable" value="false"/>
      <param name="Transacted" value="true"/>
      <param name="NbRound" value="100"/>
      <param name="NbMsgPerRound" value="100"/>
      <param name="NbSender" value="20"/>
      <param name="NbReceiver" value="1"/>
      <param name="MsgSize" value="25"/>
      <param name="dupsOk" value="false"/>
      <param name="queueMessageReadMax" value="1000"/>
      <param name="topicAckBufferMax" value="1000"/>
      <param name="multiThreadSyncDelay" value="1"/>
      <param name="multiCnx" value="true"/>
    </antcall>
  </target>

  <!-- Generic launcher for performance tests in multi-sender mode -->

  <target name="init.test6Mprops">
    <property name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
    <property name="BaseClass" value="joram.perfs.ColocatedBaseTest"/>
    <property name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
    <property name="engine" value="fr.dyade.aaa.agent.Engine"/>
    <property name="MsgTransient" value="false"/>
    <property name="SubDurable" value="true"/>
    <property name="Transacted" value="false"/>
    <property name="NbRound" value="10"/>
    <property name="NbMsgPerRound" value="100"/>
    <property name="NbSender" value="20"/>
    <property name="NbReceiver" value="1"/>
    <property name="MsgSize" value="25"/>
    <property name="dupsOk" value="false"/>
    <property name="queueMessageReadMax" value="100"/>
    <property name="topicAckBufferMax" value="100"/>
    <property name="multiThreadSyncDelay" value="1"/>
    <property name="multiCnx" value="false"/>
  </target>

  <target name="perf.test6M-x" depends="init.test6Mprops,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test6"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers5.xml"/>
      <param name="jvmargs"
             value="-DBaseClass=${BaseClass}
                    -DDestination=${Destination}
                    -DTransacted=${Transacted} 
                    -DNbSender=${NbSender} -DNbReceiver=${NbReceiver} 
                    -DNbDestination=1 
                    -DNbRound=${NbRound} -DNbMsgPerRound=${NbMsgPerRound} 
                    -DMsgSize=${MsgSize} 
                    -DMsgTransient=${MsgTransient} -DSubDurable=${SubDurable}
                    -DdupsOk=${dupsOk}
                    -DqueueMessageReadMax=${queueMessageReadMax}
                    -DtopicAckBufferMax=${topicAckBufferMax}
                    -DmultiThreadSync=${multiThreadSync}
                    -DmultiThreadSyncDelay=${multiThreadSyncDelay}
                    -DmultiCnx=${multiCnx}"/>
    </antcall>
  </target>

  <target name="perf.test26" depends="init.a3props,compile"
          description=" --> Simple test for measure travel time. Several different parameter">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test26"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DBaseClass=joram.perfs.ColocatedBaseTest -DTransacted=false -DNbReceiver=1 -DNbRound=100 -DNbMsgPerRound=100 -DMsgSize=25 -DMsgTransient=false -DSubDurable=true"/>
    </antcall>
  </target>

  <target name="perf.test27" depends="init.a3props,compile"
          description=" --> CarrierIQ Scenario. Measure travel time.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test27"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNbMsg=5000 -DMsgSize=25 -Dorg.objectweb.joram.client.jms.queueMsgCount=50 -DNTLogFileSize=512 -DConnectionManager.inFlow=500"/>
    </antcall>
  </target>
  <target name="perf.test27_bis" depends="init.a3props,compile"
          description=" --> CarrierIQ Scenario. Measure travel time.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test27"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNbMsg=500000 -DMsgSize=25 -Dorg.objectweb.joram.client.jms.queueMsgCount=50 -DNTLogFileSize=512 -DConnectionManager.inFlow=500"/>
    </antcall>
  </target>


  <target name="perf.test28" depends="init.a3props,compile"
          description=" --> Test the impact of a durable subscription on the performances of a normal subscription">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test28"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DDurable=true"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test28"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DDurable=false"/>
    </antcall>
  </target>

  <target name="perf.test29" depends="init.a3props,compile"
          description=" --> Several messages on some destination. Counts of msg/s for the receiver">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test29"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNbMaxAgents=1000 -DNbMsg=100 -DNbDest=300"/>
    </antcall>
  </target>

  <target name="perf.test30" depends="init.a3props,compile"
          description=" --> check creation of multiple connection and queue.Counts of msg/s for the receiver and sender ">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test30"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-Xms2m -Xmx1024m -DNbMaxAgents=1000 -DNbMsg=100 -DNbDest=150"/>
    </antcall>
  </target>

  <target name="perf.test33" depends="init.a3props,compile"
          description=" --> Memory test with TTL">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test33"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="perf.test34_bis" depends="init.a3props,compile"
          description=" --> test : msg/s with different parameter :NbMsg, NTLogMemorySize ">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=10000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=10000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=10000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=10000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=50000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=32 -DNTLogMemorySize=16384 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=80000"/>
    </antcall>
  </target>


  <target name="perf.test34" depends="init.a3props,compile"
          description=" --> test : msg/s with different parameter :NbMsg, NTLogMemorySize / launch with target all">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=10000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=1000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DNbMsg=1000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=1000"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=16 -DNTLogMemorySize=2048 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=500"/>
    </antcall>
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test34"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value="-DNTRepositoryImpl=fr.dyade.aaa.util.FileRepository -DNTLogFileSize=32 -DNTLogMemorySize=16384 -DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DNbMsg=800"/>
    </antcall>
  </target>

  <target name="perf.test47" depends="init.a3props,compile"
          description=" --> Test time to send, to receive.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test47"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers3.xml"/>
      <param name="jvmargs" value="-DNbRound=25 -DNbMsgPerRound=100"/>
    </antcall>
  </target>

  <target name="perf.test54" depends="init.a3props,compile"
          description=" --> test management memory ">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.perfs.Test54"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="perfs/jndi.properties"/>
      <param name="a3conf" value="perfs/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>



  <!-- end perf test -->



  <!-- start noreg -->

  <target name="noreg.test3" depends="noreg.test3-1,noreg.test3-2"/>

  <target name="noreg.test3-1" depends="init.a3props,compile"
          description=" --> Test Queue with big messages">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test3"/>
      <param name="testid" value="noreg.test3-1"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DMsgSize=256 -DMsgPerCommit=1 -DNbMsg=10"/>
    </antcall>
  </target>

  <target name="noreg.test3-2" depends="init.a3props,compile"
          description=" --> Test Topic with big messages">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test3"/>
      <param name="testid" value="noreg.test3-2"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DMsgSize=512 -DMsgPerCommit=1 -DNbMsg=100"/>
    </antcall>
  </target>

  <target name="noreg.test4" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test4"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test7.1"
          description=" --> check the use of multiple queues using agents swap in/out">
    <antcall target="noreg.test7x" inheritAll="true">
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.noreg.ColocatedBaseTest"/>
      <param name="NbMaxAgents" value="100"/>
      <param name="NTLogFileSize" value="128"/>
      <param name="NbDest" value="150"/>
      <param name="NbMsg" value="10"/>
      <param name="MsgSize" value="10"/>
    </antcall>
  </target>

  <target name="noreg.test7.2"
          description=" --> check system property and create multiple queue">
    <antcall target="noreg.test7x" inheritAll="true">
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="Destination" value="org.objectweb.joram.client.jms.Queue"/>
      <param name="BaseClass" value="joram.noreg.ColocatedBaseTest"/>
      <param name="NbMaxAgents" value="200"/>
      <param name="NTLogFileSize" value="128"/>
      <param name="NbDest" value="150"/>
      <param name="NbMsg" value="10"/>
      <param name="MsgSize" value="10"/>
    </antcall>
  </target>

  <target name="noreg.test7x" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test7"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="jvmargs" value="-DNbMaxAgents=${NbMaxAgents} -DDestination=${Destination} -DBaseClass=${BaseClass} -DNbDest=${NbDest} -DNbMsg=${NbMsg} -DMsgSize=${MsgSize}"/>
    </antcall>
  </target>

  <target name="noreg.test8" depends="init.a3props,compile"
          description=" --> check server start and stop">
    <antcall target="test.run" inheritAll="true">
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="className" value="joram.noreg.Test8"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="noreg.test9" depends="init.a3props,compile"
          description=" --> check message ID and system property">
    <antcall target="test.run" inheritAll="true">
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="className" value="joram.noreg.Test9"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="jvmargs" value="-DBaseClass=joram.noreg.ColocatedBaseTest -DNbRound=10"/>
    </antcall>
  </target>

  <target name="noreg.test10"
          description=" --> test selector with option : tcp or local">
    <ant dir="." antfile="build.xml" target="test10a.noreg"/>
    <ant dir="." antfile="build.xml" target="test10b.noreg"/>
  </target>

  <target name="test10a.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.noreg.Test10"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="jvmargs" value="-DBaseClass=joram.noreg.TcpBaseTest -DNbRound=10"/>
    </antcall>
  </target>
  <target name="test10b.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.noreg.Test10"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="jvmargs" value="-DBaseClass=joram.noreg.ColocatedBaseTest -DNbRound=10"/>
    </antcall>
  </target>

  <target name="noreg.test11"
          description=" --> check send message on delete topic thrown an exception if there are one server launch">
    <ant dir="." antfile="build.xml" target="test11a.noreg"/>
    <ant dir="." antfile="build.xml" target="test11b.noreg"/>
    <ant dir="." antfile="build.xml" target="test11c.noreg"/>
  </target>


  <target name="test11a.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test11"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="noreg.Test11-a"/>
    </antcall>
  </target>
  <target name="test11b.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test11"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers3.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value="-Dsid=1"/>
      <param name="testid" value="noreg.Test11-b"/>
    </antcall>
  </target>
  <target name="test11c.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test11"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers3.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value="-Dasync=true"/>
      <param name="testid" value="noreg.Test11-c"/>
    </antcall>
  </target>

  <target name="noreg.test12"
          description=" --> check send message on delete queue thrown an exception if there are one server launch">
    <ant dir="." antfile="build.xml" target="test12a.noreg"/>
    <ant dir="." antfile="build.xml" target="test12b.noreg"/>
    <ant dir="." antfile="build.xml" target="test12c.noreg"/>
  </target>


  <target name="test12a.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test12"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
      <param name="testid" value="noreg.Test12-a"/>
    </antcall>
  </target>
  <target name="test12b.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test12"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers3.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value="-Dsid=1"/>
      <param name="testid" value="noreg.Test12-b"/>
    </antcall>
  </target>
  <target name="test12c.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test12"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers3.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value="-Dasync=true"/>
      <param name="testid" value="noreg.Test12-c"/>
    </antcall>
  </target>

  <target name="noreg.test13" depends="init.a3props,compile"
          description=" --> check use timeout to receive when there are no message not fail">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test13"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>


  <target name="noreg.test14" depends="init.a3props,compile"
          description=" --> check selector with topic">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test14"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test15" depends="test15-1.noreg,test15-2.noreg,test15-3.noreg,test15-4.noreg"
          description=" --> test close  and start consumer cnx during producer send. option : queue or topic and  Tcp or local ">
    <ant dir="." antfile="build.xml" target="test15-1.noreg"/>
    <ant dir="." antfile="build.xml" target="test15-2.noreg"/>
    <ant dir="." antfile="build.xml" target="test15-3.noreg"/>
    <ant dir="." antfile="build.xml" target="test15-4.noreg"/>
  </target>


  <target name="test15-1.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test15"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test15-1.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=joram.noreg.TcpBaseTest"/>
    </antcall>
  </target>
  <target name="test15-2.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test15"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test15-2.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=joram.noreg.TcpBaseTest"/>
    </antcall>
  </target>
  <target name="test15-3.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test15"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test15-3.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=joram.noreg.ColocatedBaseTest"/>
    </antcall>
  </target>
  <target name="test15-4.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test15"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test15-4.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=joram.noreg.ColocatedBaseTest"/>
    </antcall>
  </target>

  <target name="noreg.test16"
          description=" --> test close during receive and start consumer cnx during producer send. option : queue or topic and  Tcp or local ">
    <ant dir="." antfile="build.xml" target="test16-1.noreg"/>
    <ant dir="." antfile="build.xml" target="test16-2.noreg"/>
    <!-- ant dir="." antfile="build.xml" target="test16-3.noreg"/ -->
    <!-- ant dir="." antfile="build.xml" target="test16-4.noreg"/ -->
  </target>


  <target name="test16-1.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test16"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test16-1.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=joram.noreg.TcpBaseTest"/>
    </antcall>
  </target>
	
  <target name="test16-2.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test16"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test16-2.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=joram.noreg.TcpBaseTest"/>
    </antcall>
  </target>
	
  <target name="test16-3.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test16"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test16-3.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=joram.noreg.ColocatedBaseTest"/>
    </antcall>
  </target>
	
  <target name="test16-4.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test16"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test16-4.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=joram.noreg.ColocatedBaseTest"/>
    </antcall>
  </target>

  <target name="noreg.test17"
          description=" --> test close and start consumer cnx during producer send. option : queue or topic and  Tcp or local ">
    <ant dir="." antfile="build.xml" target="test17-1.noreg"/>
    <ant dir="." antfile="build.xml" target="test17-2.noreg"/>
    <!-- ant dir="." antfile="build.xml" target="test17-3.noreg"/ -->
    <!-- ant dir="." antfile="build.xml" target="test17-4.noreg"/ -->
  </target>

  <target name="test17-1.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test17"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test17-1.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=joram.noreg.TcpBaseTest"/>
    </antcall>
  </target>
	
  <target name="test17-2.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test17"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test17-2.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=joram.noreg.TcpBaseTest"/>
    </antcall>
  </target>
	
  <target name="test17-3.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test17"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test17-3.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Topic -DBaseClass=joram.noreg.ColocatedBaseTest"/>
    </antcall>
  </target>
	
  <target name="test17-4.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test17"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test17-4.noreg"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DBaseClass=joram.noreg.ColocatedBaseTest"/>
    </antcall>
  </target>

  <target name="noreg.test18"
          description=" --> test exception listener activation during close. option:  Tcp or local ">
    <ant dir="." antfile="build.xml" target="test18-1.noreg"/>
    <!-- ant dir="." antfile="build.xml" target="test18-2.noreg"/ -->
  </target>


  <target name="test18-1.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test18"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test18-1.noreg"/>
      <param name="jvmargs" value="-DBaseClass=joram.noreg.TcpBaseTest"/>
    </antcall>
  </target>
	
  <target name="test18-2.noreg" depends="init.a3props,compile">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test18"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="test18-2.noreg"/>
      <param name="jvmargs" value="-DBaseClass=joram.noreg.ColocatedBaseTest"/>
    </antcall>
  </target>

  <target name="noreg.test19" depends="init.a3props,compile"
          description=" --> test delete temptopic on onMessage()">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test19"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="noreg.test19"/>
      <param name="jvmargs" value="-Dsid=0"/>
    </antcall>
  </target>

  <target name="noreg.test20" depends="init.a3props,compile"
          description=" --> check message send to DMQ when ttl expire">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test20"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="noreg.test20"/>
      <param name="jvmargs" value="-Dsid=0"/>
    </antcall>
  </target>

  <target name="noreg.test21" depends="init.a3props,compile"
          description=" --> check when message sent to a DMQ">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test21"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="noreg.test21"/>
      <param name="jvmargs" value="-Dsid=0"/>
    </antcall>
  </target>

  <target name="noreg.test25" depends="init.a3props,compile"
          description=" --> Test closure of connection on stop server with cnxPendingTimer and connectingTimer ">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test25"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="noreg.test25"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test31" depends="init.a3props,compile"
          description=" --> check use TTL ">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test31"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test31"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test32" depends="init.a3props,compile"
          description=" --> test create queue">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test32"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test32"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test35" depends="init.a3props,compile"
          description=" --> test getadminname">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test35"/>
      <param name="engine" value="fr.dyade.aaa.agent.GCEngine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test35"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>


  <target name="noreg.test39" depends="init.a3props,compile"
          description=" --> test rollback with queue. message is redelivred">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test39"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test39"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test40" depends="init.a3props,compile"
          description=" --> test messagelistener with rollback. message is redelivred">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test40"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test40"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test41" depends="init.a3props,compile"
          description=" --> test messagelistener with RuntimeException. message is redelivred">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test41"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test41"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>
	
  <target name="noreg.test45" depends="init.a3props,compile"
          description=" --> test TTL. With a topic and durable subscrber">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test45"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers3.xml"/>
      <param name="testid" value="noreg.test45"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test46" depends="init.a3props,compile"
          description=" --> test threshold parameter and test DMQ with message more and more big">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test46"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="network" value="fr.dyade.aaa.agent.SimpleNetwork"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers3.xml"/>
      <param name="testid" value="noreg.test46"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test48" depends="init.a3props,compile"
          description=" --> test queue.clear() , restart of server, and check there is no message">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test48"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test48"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test49" depends="init.a3props,compile"
          description=" --> test queue.deleteMessage() , restart of server, and check there is no message">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test49"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test49"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test50" depends="init.a3props,compile"
          description=" --> test user.clearSubscription(), restart of server, and check there is no message">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test50"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test50"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test51" depends="init.a3props,compile"
          description=" --> test user.deleteMessage(), restart of server, and check there is no message">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test51"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test51"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test56" depends="init.a3props,compile"
          description=" --> test createQueue method">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test56"/>
      <param name="testid" value="noreg.test56"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="testid" value="noreg.test56"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="noreg.test57" depends="noreg.test57-1,noreg.test57-2"/>

  <target name="noreg.test57-1" depends="init.a3props,compile"
          description=" --> Test server restart with a lot of big messages">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test57"/>
      <param name="testid" value="noreg.test57"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="noreg.test57-1"/>
      <param name="jvmargs" value="-DDestination=org.objectweb.joram.client.jms.Queue -DMsgSize=256 -DNbMsg=238"/>
    </antcall>
  </target>

  <target name="noreg.test57-2" depends="init.a3props,compile"
          description=" --> Test server restart with a lot of big messages">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.noreg.Test57"/>
      <param name="testid" value="noreg.test57"/>
      <param name="jndiconf" value="noreg/jndi.properties"/>
      <param name="a3conf" value="noreg/a3servers1.xml"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="testid" value="noreg.test57-2"/>
      <param name="jvmargs" value="-DMomMessageClass=org.objectweb.joram.shared.messages.MessageSoftRef -DDestination=org.objectweb.joram.client.jms.Queue -DMsgSize=256 -DNbMsg=5000"/>
    </antcall>
  </target>

  <!-- end noreg -->

  <!-- test with bug -->

  <target name="withbug.test1" depends="init.a3props,compile"
          description=" --> bug">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.withbug.Test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="withbug/jndi.properties"/>
      <param name="a3conf" value="withbug/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="withbug.test2" depends="init.a3props,compile"
          description=" --> bug">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.withbug.Test2"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="withbug/jndi.properties"/>
      <param name="a3conf" value="withbug/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <!-- end test with bug -->



  <!-- test xa -->
  <target name="xa.test1" depends="init.a3props,compile"
          description=" --> Basic functioning of XA">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.xa.Test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="xa/jndi.properties"/>
      <param name="a3conf" value="xa/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="xa.test2" depends="init.a3props,compile"
          description=" --> test commit">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.xa.Test2"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="xa/jndi.properties"/>
      <param name="a3conf" value="xa/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="xa.test3" depends="init.a3props,compile"
          description=" --> test rollback : on send and on receive">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.xa.Test3"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="xa/jndi.properties"/>
      <param name="a3conf" value="xa/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="xa.test4" depends="init.a3props,compile"
          description=" --> test recover : on send and on receive">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.xa.Test4"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="xa/jndi.properties"/>
      <param name="a3conf" value="xa/a3servers1.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <!-- end test xa -->

  <!-- start bridge test -->
  <target name="bridge.test" depends="init.a3props,compile">
     <parallel>
       <antcall target="test.run" inheritAll="true"/>
       
       <sequential>
         <sleep seconds="8"/>
         <java classname="${adminClassName}" failonerror="no" fork="yes" dir="${test.dir}">
           <classpath path="${project.class.path}"/>
           <jvmarg line="${jvmadminArgs}"/>
         </java>
       </sequential>
     </parallel>
   </target>
  
  <target name="bridge.test1" depends="init.a3props,compile"
          description=" --> producer on foreign queue, consumer on bridge queue ">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.test1"/>
        <param name="adminClassName" value="joram.bridge.Admin"/>
        <param name="className" value="joram.bridge.BridgeTest"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>
  
  <target name="bridge.test1.1" depends="init.a3props,compile"
           description=" --> producer on foreign queue, consumer on bridge queue (automatic)">
       <antcall target="bridge.test" inheritAll="true">
         <param name="testid" value="bridge.test1.1"/>
         <param name="adminClassName" value="joram.bridge.Admin"/>
         <param name="className" value="joram.bridge.BridgeTest"/>
         <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
         <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
         <param name="jndiconf" value="bridge/jndi.properties"/>
         <param name="a3conf" value="bridge/a3servers.xml"/>
         <param name="jvmargs" value=""/>
         <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
       </antcall>
   </target>
  
  <target name="bridge.test2" depends="init.a3props,compile"
          description=" --> publisher on foreign topic and subscriber on bridge topic">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.test2"/>
        <param name="adminClassName" value="joram.bridge.Admin"/>
        <param name="className" value="joram.bridge.BridgeTest2"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>
  
  <target name="bridge.test2.1" depends="init.a3props,compile"
          description=" --> publisher on foreign topic and subscriber on bridge topic (automatic)">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.test2.1"/>
        <param name="adminClassName" value="joram.bridge.Admin"/>
        <param name="className" value="joram.bridge.BridgeTest2"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
      </antcall>
  </target>

  <target name="bridge.test3" depends="init.a3props,compile"
          description=" --> publisher on bridge topic and subscriber on foreign topic">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.test3"/>
        <param name="adminClassName" value="joram.bridge.Admin"/>
        <param name="className" value="joram.bridge.BridgeTest3"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>
  
  <target name="bridge.test3.1" depends="init.a3props,compile"
          description=" --> publisher on bridge topic and subscriber on foreign topic (automatic)">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.test3.1"/>
        <param name="adminClassName" value="joram.bridge.Admin"/>
        <param name="className" value="joram.bridge.BridgeTest3"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
      </antcall>
  </target>

  <target name="bridge.test4" depends="init.a3props,compile"
          description=" --> producer on bridge queue and consumer on foreign queue">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.test4"/>
        <param name="adminClassName" value="joram.bridge.Admin"/>
        <param name="className" value="joram.bridge.BridgeTest4"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>

  <target name="bridge.test5" depends="init.a3props,compile"
          description=" --> producer on bridge queue and subscriber on foreign topic">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.test5"/>
        <param name="adminClassName" value="joram.bridge.CrossAdmin"/>
        <param name="className" value="joram.bridge.BridgeTest5"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>
  
  <target name="bridge.test5.1" depends="init.a3props,compile"
          description=" --> producer on bridge queue and subscriber on foreign topic (automatic)">
    <antcall target="bridge.test" inheritAll="true">
      <param name="testid" value="bridge.test5.1"/>
       <param name="adminClassName" value="joram.bridge.CrossAdmin"/>
       <param name="className" value="joram.bridge.BridgeTest5"/>
       <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
       <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
       <param name="jndiconf" value="bridge/jndi.properties"/>
       <param name="a3conf" value="bridge/a3servers.xml"/>
       <param name="jvmargs" value=""/>
       <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
    </antcall>
  </target>

  <target name="bridge.test6" depends="init.a3props,compile"
          description=" --> publisher on bridge queue and consumer on  foreign queue">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.test6"/>
        <param name="adminClassName" value="joram.bridge.CrossAdmin"/>
        <param name="className" value="joram.bridge.BridgeTest6"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>
  
  <target name="bridge.test6.1" depends="init.a3props,compile"
          description=" --> publisher on bridge queue and consumer on  foreign queue (automatic)">
    <antcall target="bridge.test" inheritAll="true">
      <param name="testid" value="bridge.test6.1"/>
      <param name="adminClassName" value="joram.bridge.CrossAdmin"/>
      <param name="className" value="joram.bridge.BridgeTest6"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="bridge/jndi.properties"/>
      <param name="a3conf" value="bridge/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
    </antcall>
  </target>

  <target name="bridge.xatest1" depends="init.a3props,compile"
          description=" --> producer on XA foreign queue and consumer on a bridge">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest1"/>
        <param name="adminClassName" value="joram.bridge.XAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest1"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>
  
  <target name="bridge.xatest1.1" depends="init.a3props,compile"
          description=" --> producer on XA foreign queue and consumer on a bridge (automatic)">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest1.1"/>
        <param name="adminClassName" value="joram.bridge.XAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest1"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
      </antcall>
  </target>

  <target name="bridge.xatest2" depends="init.a3props,compile"
          description=" --> publisher on XA foreign topic and subscriber on a bridge">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest2"/>
        <param name="adminClassName" value="joram.bridge.XAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest2"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>

  <target name="bridge.xatest2.1" depends="init.a3props,compile"
          description=" --> publisher on XA foreign topic and subscriber on a bridge (automatic)">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest2.1"/>
        <param name="adminClassName" value="joram.bridge.XAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest2"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
      </antcall>
  </target>
  
  <target name="bridge.xatest3" depends="init.a3props,compile"
          description=" --> consumer on XA foreign queue and producer on bridge queue">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest3"/>
        <param name="adminClassName" value="joram.bridge.XAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest3"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>

  <target name="bridge.xatest4" depends="init.a3props,compile"
          description=" --> subscriber on XA foreign topic and publisher on bridge topic">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest4"/>
        <param name="adminClassName" value="joram.bridge.XAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest4"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>

  <target name="bridge.xatest4.1" depends="init.a3props,compile"
           description=" --> subscriber on XA foreign topic and publisher on bridge topic (automatic)">
       <antcall target="bridge.test" inheritAll="true">
         <param name="testid" value="bridge.xatest4.1"/>
         <param name="adminClassName" value="joram.bridge.XAAdmin"/>
         <param name="className" value="joram.bridge.XABridgeTest4"/>
         <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
         <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
         <param name="jndiconf" value="bridge/jndi.properties"/>
         <param name="a3conf" value="bridge/a3servers.xml"/>
         <param name="jvmargs" value=""/>
         <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
       </antcall>
   </target>

  <target name="bridge.xatest5" depends="init.a3props,compile"
          description=" --> consumer on XA foreign queue and publisher on bridge topic">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest5"/>
        <param name="adminClassName" value="joram.bridge.CrossXAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest5"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>
  
  <target name="bridge.xatest5.1" depends="init.a3props,compile"
          description=" --> consumer on XA foreign queue and publisher on bridge topic">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest5.1"/>
        <param name="adminClassName" value="joram.bridge.CrossXAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest5"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
      </antcall>
  </target>

  <target name="bridge.xatest6" depends="init.a3props,compile"
          description=" -->  subscriber on XA foreign topic and producer on bridge queue">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest6"/>
        <param name="adminClassName" value="joram.bridge.CrossXAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest6"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value=""/>
      </antcall>
  </target>
  
  <target name="bridge.xatest6.1" depends="init.a3props,compile"
          description=" -->  subscriber on XA foreign topic and producer on bridge queue (automatic)">
      <antcall target="bridge.test" inheritAll="true">
        <param name="testid" value="bridge.xatest6.1"/>
        <param name="adminClassName" value="joram.bridge.CrossXAAdmin"/>
        <param name="className" value="joram.bridge.XABridgeTest6"/>
        <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
        <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
        <param name="jndiconf" value="bridge/jndi.properties"/>
        <param name="a3conf" value="bridge/a3servers.xml"/>
        <param name="jvmargs" value=""/>
        <param name="jvmadminArgs" value="-DautomaticRequest=true"/>
      </antcall>
  </target>

  <!-- end bridge test -->

  <!-- start scheduler test -->
  <target name="schedqueue.test1" depends="init.a3props,compile"
          description=" --> send message specified schedulerdate : first in futur, second in pass">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.schedqueue.Test1"/>
      <param name="testid" value="schedqueue.test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="schedqueue/jndi.properties"/>
      <param name="a3conf" value="schedqueue/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="schedqueue.test2" depends="init.a3props,compile"
          description=" --> send two message, first with schedulerdate > of second message schedulerdate. check receive the second before the fisrt">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.schedqueue.Test2"/>
      <param name="testid" value="schedqueue.test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="schedqueue/jndi.properties"/>
      <param name="a3conf" value="schedqueue/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <!-- end scheduler test -->


  <!-- test cluster -->
  <target name="cluster.test1" depends="init.a3props,compile"
          description=" -->  test topic cluster send and receive message">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.cluster.Test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="cluster.test2" depends="init.a3props,compile"
          description=" -->  Test : can't cluster an already clustered topic">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.cluster.Test2"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="cluster.testQ1" depends="init.a3props,compile"
          description=" --> test simple cluster queue with producer on receiver on the same queue">
    <antcall target="test.run" inheritAll="true">
      <param name="testid" value="cluster.testQ1"/>
      <param name="className" value="joram.cluster.TestQ1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="cluster.testQ2" depends="init.a3props,compile"
          description=" --> producer on queue 2, receiver on queue 0 and 1, check two receiver receive messages">
    <antcall target="test.run" inheritAll="true">
      <param name="testid" value="cluster.testQ2"/>
      <param name="className" value="joram.cluster.TestQ2"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="cluster.testQ3" depends="init.a3props,compile"
          description=" -->  fix big period and check no recieve any message ">
    <antcall target="test.run" inheritAll="true">
      <param name="testid" value="cluster.testQ3"/>
      <param name="className" value="joram.cluster.TestQ3"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <target name="cluster.testQ4" depends="init.a3props,compile"
          description=" --> check producThreshold property">
    <antcall target="test.run" inheritAll="true">
      <param name="testid" value="cluster.testQ4"/>
      <param name="className" value="joram.cluster.TestQ4"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>


  <target name="cluster.testQ5" depends="init.a3props,compile"
          description=" --> check consumThreshold property ">
    <antcall target="test.run" inheritAll="true">
      <param name="testid" value="cluster.testQ5"/>
      <param name="className" value="joram.cluster.TestQ5"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="cluster/jndi.properties"/>
      <param name="a3conf" value="cluster/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>
  <!-- end test cluster -->

  <!--  test hierarchical -->

  <target name="hierarchical.test1" depends="init.a3props,compile"
          description=" --> test hierarchical topic">
    <antcall target="test.run" inheritAll="true">
      <param name="testid" value="hierarchical.test1"/>
      <param name="className" value="joram.hierarchical.Test1"/>
      <param name="engine" value="fr.dyade.aaa.agent.Engine"/>
      <param name="transaction" value="fr.dyade.aaa.util.NTransaction"/>
      <param name="jndiconf" value="hierarchical/jndi.properties"/>
      <param name="a3conf" value="hierarchical/a3servers.xml"/>
      <param name="jvmargs" value=""/>
    </antcall>
  </target>

  <!-- end  test hierarchical -->


  <!--  test ssl -->

  <!-- Initializes the ssl centralized configuration -->
  <target name="sslsimple_init" depends="init.a3props,compile">
    <property name="keystore" location="${test.dir}/joram_ks"/>
    <property name="keystore_pass" value="jorampass"/>
    <antcall target="init.test" inheritAll="true">
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
      <param name="a3conf" value="ssl/a3servers.xml"/>
      <param name="jndiconf" value="ssl/jndi.properties"/>
    </antcall>
    <copy file="ssl/joram_ks" todir="${test.dir}"/>
  </target>


  <target name="ssl.test" depends="sslsimple_init"
          description=" --> test with ssl conection">
    <java classname="joram.ssl.Test" failonerror="no" fork="yes" dir="${test.dir}">
      <classpath path="${project.class.path}"/>
      <jvmarg line="-Dorg.objectweb.joram.keystore=${keystore} -Dorg.objectweb.joram.keystorepass=${keystore_pass} -Dframework.TestCase.OutFile=${report.file} "/>
    </java>
  </target>

  <!-- end test ssl -->

  <target name="jca.test" depends="init.a3props,compile"
          description=" --> test joram connector">
    <antcall target="jca.test.run" inheritAll="true">
      <param name="className" value="joram.connector.Connector"/>
      <param name="testid" value="jca.test"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
      <param name="a3conf" value="connector/a3servers.xml"/>
      <param name="jndiconf" value="connector/jndi.properties"/>
      <param name="joramAdmin" value="connector/joramAdmin.xml"/>
    </antcall>
  </target>

  <target name="jca.test.run">
    <antcall target="init.test" inheritAll="true"/>
    <copy file="connector/joramAdminExport.xml" todir="${test.dir}"/>
    <antcall target="test.start" inheritAll="true"/>
  </target>

  <!--  start dmq tests -->
  <target name="dmq.TestDmq1" depends="init.a3props,compile"
          description=" --> check threshold of specific queue and user">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.dmq.TestDmq1"/>
      <param name="testid" value="dmq.TestDmq1"/>
      <param name="jndiconf" value="dmq/jndi.properties"/>
      <param name="a3conf" value="dmq/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="dmq.TestDmq2" depends="init.a3props,compile"
          description=" --> check default threshold">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.dmq.TestDmq2"/>
      <param name="testid" value="dmq.TestDmq2"/>
      <param name="jndiconf" value="dmq/jndi.properties"/>
      <param name="a3conf" value="dmq/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="dmq.TestDmq3" depends="init.a3props,compile"
          description=" --> check default dmq">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.dmq.TestDmq3"/>
      <param name="testid" value="dmq.TestDmq3"/>
      <param name="jndiconf" value="dmq/jndi.properties"/>
      <param name="a3conf" value="dmq/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <target name="dmq.TestDmq4" depends="init.a3props,compile"
          description=" --> check default dmq and default threshold for queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.dmq.TestDmq4"/>
      <param name="testid" value="dmq.TestDmq4"/>
      <param name="jndiconf" value="dmq/jndi.properties"/>
      <param name="a3conf" value="dmq/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="dmq.TestDmq5" depends="init.a3props,compile"
          description=" --> check default dmq and default threshold for user">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.dmq.TestDmq5"/>
      <param name="testid" value="dmq.TestDmq5"/>
      <param name="jndiconf" value="dmq/jndi.properties"/>
      <param name="a3conf" value="dmq/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="dmq.TestDmq6" depends="init.a3props,compile"
          description=" --> check config dmq with joramAdmin.xml">
    <parallel>
      <antcall target="test.run" inheritAll="true">
        <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
        <param name="className" value="joram.dmq.TestDmq6"/>
        <param name="testid" value="dmq.TestDmq6"/>
        <param name="jndiconf" value="dmq/jndi.properties"/>
        <param name="a3conf" value="dmq/a3servers.xml"/>
        <param name="joramAdmin" value="dmq/joramAdmin.xml"/>
        <param name="jvmargs" value=""/>
        <param name="args" value=""/>
      </antcall>

      <sequential>
        <sleep seconds="3"/>
        <java classname="org.objectweb.joram.client.jms.admin.AdminModule"
              failonerror="no" fork="yes" dir="${test.dir}">
          <classpath path="${project.class.path}"/>
          <arg line="./joramAdmin.xml"/>
        </java>
      </sequential>
    </parallel>
  </target>
  
  <target name="dmq.ChainedDMQ" depends="init.a3props,compile"
          description=" --> test chaining dmqs">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.dmq.ChainedDMQ"/>
      <param name="testid" value="dmq.ChainedDMQ"/>
      <param name="jndiconf" value="dmq/jndi.properties"/>
      <param name="a3conf" value="dmq/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <!-- end DMQ tests -->

  <!-- TTL tests -->
  <target name="ttl.Test1_Topic" depends="init.a3props,compile"
          description=" --> test ttl with with 2 distributed serveurs and a topic">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.ttl.Test1_Topic"/>
      <param name="jndiconf" value="ttl/jndi.properties"/>
      <param name="a3conf" value="ttl/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

  <target name="ttl.Test2_Queue" depends="init.a3props,compile"
          description=" --> test ttl with with 2 distributed serveurs and a queue">
    <antcall target="test.run" inheritAll="true">
      <param name="transaction" value="fr.dyade.aaa.util.NullTransaction"/>
      <param name="className" value="joram.ttl.Test2_Queue"/>
      <param name="jndiconf" value="ttl/jndi.properties"/>
      <param name="a3conf" value="ttl/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <!-- end TTL tests -->

  <!-- SUB tests -->
  <target name="sub.Sub" depends="init.a3props,compile"
          description=" --> test about creation of subscriber">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.sub.Sub"/>
      <param name="jndiconf" value="sub/jndi.properties"/>
      <param name="a3conf" value="sub/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  <!-- end SUB tests -->

  <target name="monit.Test" depends="init.a3props,compile"
          description=" --> Simple monitoring">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.monitoring.TestMonitoringTopic"/>
      <param name="jndiconf" value="monitoring/jndi.properties"/>
      <param name="a3conf" value="monitoring/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  
  <target name="monit.Test2" depends="init.a3props,compile"
          description=" --> Tests changing monitoring properties">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.monitoring.TestMonitoringTopic2"/>
      <param name="jndiconf" value="monitoring/jndi.properties"/>
      <param name="a3conf" value="monitoring/a3servers.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>
  
  <target name="monit.Test3" depends="init.a3props,compile"
          description=" --> Tests monitoring as a service.">
    <antcall target="test.run" inheritAll="true">
      <param name="className" value="joram.monitoring.TestMonitoringTopic3"/>
      <param name="jndiconf" value="monitoring/jndi.properties"/>
      <param name="a3conf" value="monitoring/a3servers2.xml"/>
      <param name="jvmargs" value=""/>
      <param name="args" value=""/>
    </antcall>
  </target>

</project>
